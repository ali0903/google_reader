---
layout: post
title:  "记一次开发中一个奇特的错误"
date:   2010-11-04 20:58:00
author: 依依老猫
categories: program
---

## 记一次开发中一个奇特的错误
### by 依依老猫
### at 2010-11-04 20:58:00
### original <http://www.cnblogs.com/lynnlin/archive/2010/11/04/1869391.html>

<p><p>最近写一个关于用JavaScript做图片自动切换问题发现一个非常奇特的问题，除了空格和换行外完全相同的代码，在Firefox下却有截然不同的运行结果，今天记录以提供他人留意及自我备查。</p><p>废话不多说，先上代码给大家看看</p><div><img src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt=""><img src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif"><span>代码1</span><div><div><span style="color:#0000ff">&lt;!</span><span style="color:#ff00ff">DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">html </span><span style="color:#ff0000">xmlns</span><span style="color:#0000ff">="http://www.w3.org/1999/xhtml"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">head</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">meta </span><span style="color:#ff0000">http-equiv</span><span style="color:#0000ff">="Content-Type"</span><span style="color:#ff0000"> content</span><span style="color:#0000ff">=&quot;text/html; charset=utf-8&quot;</span><span style="color:#ff0000"> </span><span style="color:#0000ff">/&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">title</span><span style="color:#0000ff">&gt;</span><span style="color:#000000">依依园地</span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">title</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">head</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">body</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>    </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">div </span><span style="color:#ff0000">id</span><span style="color:#0000ff">="win"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>        </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">ul </span><span style="color:#ff0000">id</span><span style="color:#0000ff">="picChange"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">img  </span><span style="color:#ff0000">src</span><span style="color:#0000ff">="images/01.jpg"</span><span style="color:#ff0000"> title</span><span style="color:#0000ff">="图片1"</span><span style="color:#0000ff">&gt;&lt;/</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">img  </span><span style="color:#ff0000">src</span><span style="color:#0000ff">="images/02.jpg"</span><span style="color:#ff0000"> title</span><span style="color:#0000ff">="图片2"</span><span style="color:#0000ff">&gt;&lt;/</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">img  </span><span style="color:#ff0000">src</span><span style="color:#0000ff">="images/03.jpg"</span><span style="color:#ff0000"> title</span><span style="color:#0000ff">="图片3"</span><span style="color:#0000ff">&gt;&lt;/</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>        </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">ul</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>    </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">div</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">script </span><span style="color:#ff0000">type</span><span style="color:#0000ff">="text/javascript"</span><span style="color:#0000ff">&gt;</span><span style="background-color:#f5f5f5;color:#000000"><br></span><span style="background-color:#f5f5f5;color:#0000ff">var</span><span style="background-color:#f5f5f5;color:#000000"> pic </span><span style="background-color:#f5f5f5;color:#000000">=</span><span style="background-color:#f5f5f5;color:#000000"> document.getElementById(</span><span style="background-color:#f5f5f5;color:#000000">'</span><span style="background-color:#f5f5f5;color:#000000">picChange</span><span style="background-color:#f5f5f5;color:#000000">'</span><span style="background-color:#f5f5f5;color:#000000">);<br></span><span style="background-color:#f5f5f5;color:#0000ff">var</span><span style="background-color:#f5f5f5;color:#000000"> picList </span><span style="background-color:#f5f5f5;color:#000000">=</span><span style="background-color:#f5f5f5;color:#000000"> pic.getElementsByTagName(</span><span style="background-color:#f5f5f5;color:#000000">"</span><span style="background-color:#f5f5f5;color:#000000">li</span><span style="background-color:#f5f5f5;color:#000000">"</span><span style="background-color:#f5f5f5;color:#000000">);<br>alert(picList[</span><span style="background-color:#f5f5f5;color:#000000">0</span><span style="background-color:#f5f5f5;color:#000000">].firstChild);<br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">script</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">body</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">html</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span></div></div></div><p><br></p><p> 以上代码1请分别在Firefox和IE中运行，Firefox出现的是 [object Text] ，而IE中出现的是[object]，这里IE和Firefox都把<span style="background-color:#f5f5f5;color:#000000">picList[</span><span style="background-color:#f5f5f5;color:#000000">0</span><span style="background-color:#f5f5f5;color:#000000">].firstChild</span>这个对象当作object对象，Firefox提示是Text类型对象，IE没有提示更细了。<br></p><p>我们再运行下面这部分的代码看看，看清楚了，代码本身相同，但是li下面没做换行缩进。 <br></p><div><img src="http://images.cnblogs.com/OutliningIndicators/ContractedBlock.gif" alt=""><img src="http://images.cnblogs.com/OutliningIndicators/ExpandedBlockStart.gif"><span>代码2</span><div><div><span style="color:#0000ff">&lt;!</span><span style="color:#ff00ff">DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.0 Transitional//EN&quot; &quot;http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd&quot;</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">html </span><span style="color:#ff0000">xmlns</span><span style="color:#0000ff">="http://www.w3.org/1999/xhtml"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">head</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">meta </span><span style="color:#ff0000">http-equiv</span><span style="color:#0000ff">="Content-Type"</span><span style="color:#ff0000"> content</span><span style="color:#0000ff">=&quot;text/html; charset=utf-8&quot;</span><span style="color:#ff0000"> </span><span style="color:#0000ff">/&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">title</span><span style="color:#0000ff">&gt;</span><span style="color:#000000">依依园地</span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">title</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">head</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">body</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>    </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">div </span><span style="color:#ff0000">id</span><span style="color:#0000ff">="win"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>        </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">ul </span><span style="color:#ff0000">id</span><span style="color:#0000ff">="picChange"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;&lt;</span><span style="color:#800000">img  </span><span style="color:#ff0000">src</span><span style="color:#0000ff">="images/bigpic/01.jpg"</span><span style="color:#ff0000"> title</span><span style="color:#0000ff">="护腰/HY005"</span><span style="color:#0000ff">&gt;&lt;/</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;&lt;</span><span style="color:#800000">img  </span><span style="color:#ff0000">src</span><span style="color:#0000ff">="images/bigpic/02.jpg"</span><span style="color:#ff0000"> title</span><span style="color:#0000ff">="枕头吊臂/DB-004"</span><span style="color:#0000ff">&gt;&lt;/</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;&lt;</span><span style="color:#800000">img  </span><span style="color:#ff0000">src</span><span style="color:#0000ff">="images/bigpic/03.jpg"</span><span style="color:#ff0000"> title</span><span style="color:#0000ff">="大护脚/HY-001"</span><span style="color:#0000ff">&gt;&lt;/</span><span style="color:#800000">li</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>        </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">ul</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>    </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">div</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;</span><span style="color:#800000">script </span><span style="color:#ff0000">type</span><span style="color:#0000ff">="text/javascript"</span><span style="color:#0000ff">&gt;</span><span style="background-color:#f5f5f5;color:#000000"><br></span><span style="background-color:#f5f5f5;color:#0000ff">var</span><span style="background-color:#f5f5f5;color:#000000"> pic </span><span style="background-color:#f5f5f5;color:#000000">=</span><span style="background-color:#f5f5f5;color:#000000"> document.getElementById(</span><span style="background-color:#f5f5f5;color:#000000">'</span><span style="background-color:#f5f5f5;color:#000000">picChange</span><span style="background-color:#f5f5f5;color:#000000">'</span><span style="background-color:#f5f5f5;color:#000000">);<br></span><span style="background-color:#f5f5f5;color:#0000ff">var</span><span style="background-color:#f5f5f5;color:#000000"> picList </span><span style="background-color:#f5f5f5;color:#000000">=</span><span style="background-color:#f5f5f5;color:#000000"> pic.getElementsByTagName(</span><span style="background-color:#f5f5f5;color:#000000">"</span><span style="background-color:#f5f5f5;color:#000000">li</span><span style="background-color:#f5f5f5;color:#000000">"</span><span style="background-color:#f5f5f5;color:#000000">);<br>alert(picList[</span><span style="background-color:#f5f5f5;color:#000000">0</span><span style="background-color:#f5f5f5;color:#000000">].firstChild);<br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">script</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">body</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">html</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br></span></div></div></div><p>以上代码2请分别在Firefox和IE中运行，Firefox出现的是 [object HTMLImageElement] ，而IE中出现的是[object]，这里IE和Firefox都把<span style="background-color:#f5f5f5;color:#000000">picList[</span><span style="background-color:#f5f5f5;color:#000000">0</span><span style="background-color:#f5f5f5;color:#000000">].firstChild</span>这个对象当作object对象，Firefox提示是HTMLImageElement类型对象，IE没有提示更细了。<br></p><p>上下两种写法只是缩进和换行的差别，在IE中被认做相同的object对象，可是不同的缩进在Firefox中却代表了不同的对象，Firefox对HTML的解析实在令人费解。 <br></p><p>再此做记录，希望各位朋友看了有用，别因为跟我一样的问题半天没找到解决问题的方法。</p><img src="http://www.cnblogs.com/aggbug/1869391.html?type=0" width="1" height="1" alt=""><p>作者: <a href="http://www.cnblogs.com/rss">依依老猫</a> 发表于 2010-11-04 20:58 <a href="http://www.cnblogs.com/lynnlin/archive/2010/11/04/1869391.html">原文链接</a></p><p>评论: 0　<a href="http://www.cnblogs.com/lynnlin/archive/2010/11/04/1869391.html#pagedcomment">查看评论</a>　<a href="http://www.cnblogs.com/lynnlin/archive/2010/11/04/1869391.html#commentform">发表评论</a></p><hr><p>最新新闻：<br>· <a href="http://news.cnblogs.com/n/79803/">工信部对腾讯和360纠纷事件介入调查</a><span style="color:gray">(2010-11-04 20:53)</span><br>· <a href="http://news.cnblogs.com/n/79802/">亚洲最受尊敬的企业：苹果</a><span style="color:gray">(2010-11-04 20:52)</span><br>· <a href="http://news.cnblogs.com/n/79801/">“3Q大战”致飞信下载搜索量上涨600%</a><span style="color:gray">(2010-11-04 20:48)</span><br>· <a href="http://news.cnblogs.com/n/79800/">Google CEO认为中国对互联网控制最终会失败</a><span style="color:gray">(2010-11-04 20:48)</span><br>· <a href="http://news.cnblogs.com/n/79799/">微软免费杀毒软件MSE 2010 RC 更令我们期待</a><span style="color:gray">(2010-11-04 20:40)</span><br></p><p>编辑推荐：<a href="http://news.cnblogs.com/n/79632/">腾讯称：将在装有360软件的电脑上停止运行QQ（持续更新）</a><br></p><p>网站导航：<a href="http://www.cnblogs.com">博客园首页</a>  <a href="http://home.cnblogs.com/">我的园子</a>  <a href="http://news.cnblogs.com">新闻</a>  <a href="http://home.cnblogs.com/ing/">闪存</a>  <a href="http://home.cnblogs.com/group/">小组</a>  <a href="http://space.cnblogs.com/q/">博问</a>  <a href="http://kb.cnblogs.com">知识库</a></p></p>