---
layout: post
title:  "vim代码补全终极配置"
date:   2011-04-15 13:05:00
author: qiang.xu
categories: program
---

## vim代码补全终极配置
### by qiang.xu
### at 2011-04-15 13:05:00
### original <http://www.cnblogs.com/xuqiang/archive/2011/04/15/2016475.html>

<p><blockquote>
<p>1. 先来看看效果图</p>
<p>2. 配置方法 </p>
</blockquote>
<h3 style="padding-bottom:3px;background-color:#808080;font-family:verdana,geneva,arial,helvetica,sans-serif;height:30px;color:white;font-size:15pt;font-weight:bolder;padding-top:10px"><strong><font face="Cambria">&lt;1&gt;.效果图</font></strong></h3>
<p>下面的效果如如果没有特殊说明，均是不需要按代码提示的快捷键（例如ctrl+p等）的，看看效果，是不是很想visual assist。</p>
<p>1.1  结构struct和枚举enum代码提示：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/xuqiang/c/vim_struct_codecomplete.png" width="801" height="255" alt=""> </p>
<p>1.2  用户定义函数代码提示</p>
<p> <img src="http://images.cnblogs.com/cnblogs_com/xuqiang/c/c_function.png" width="797" height="372" alt=""></p>
<p>1.3  用户定义变量代码提示</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/xuqiang/c/vim_c_varible.png" width="793" height="239" alt=""> </p>
<p>1.4  c++ class method代码提示：</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/xuqiang/c/vim_class_property.png" width="790" height="414" alt=""> </p>
<p>1.5 class属性代码提示</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/xuqiang/c/vim_class_method.png" width="788" height="408" alt=""> </p>
<p>1.6 c library代码提示</p>
<p><img src="http://images.cnblogs.com/cnblogs_com/xuqiang/c/c_lib_complete.png" width="782" height="418" alt=""> </p>
<h3 style="padding-bottom:3px;background-color:#808080;font-family:verdana,geneva,arial,helvetica,sans-serif;height:30px;color:white;font-size:15pt;font-weight:bolder;padding-top:10px"><strong><font face="Cambria">&lt;2&gt;.配置方法</font></strong></h3>
<p>2.1 安装ctags并生成tag文件</p><div><div>安装ctags </div><p>xuqiang@ubuntu:~/Documents/vim/test$ sudo apt-get install ctags</p><p>为linux下的c头文件生成tag文件，如果想要为其他的库生成tag文件，原理同下：</p><div><div>xuqiang@ubuntu:~/Documents/vim/test$ sudo ctags -f c --recurse --verbose</div></div><div>其中-f制定tag文件的名字，--recurse表明递归生成当前目录下的所有文件和文件夹。--verbose表明在控制台中打印当前生成进度信息。最好将生成的tag文件保存到一个特定的目录中，这里我是存放在了.vim下：</div><div><div>xuqiang@ubuntu:~/.vim$ ls</div><div>after     c-support  exUtility-4.2.0  plugin           <span style="color:red">tags</span></div><div>autoload  doc        ftplugin         README.csupport</div></div></div><p>2.2 下载插件</p><p>下载插件（红色为本节配置使用到的插件），并存放在~/.vim/plugin/下。</p><div><div>|-- c.vim</div><div>|-- <span style="color:red">neocomplcache.vim</span></div><div>|-- snippet.vim</div><div>|-- supertab.vim</div><div>|-- taglist.vim</div></div><p>2.3 .vimrc配置文件</p><p> &quot; prérequis tags </p><div><div>set nocp </div><div>filetype plugin on </div><div></div><div>&quot; configure tags - add additional tags here or comment out not-used ones </div><div>&quot; load user definition tags </div><div>&quot; set tags+=~/.vim/tags/stl </div><div>set tags+=~/.vim/tags/c</div><div>" linux header file tag</div><div>" set tags+=~/.vim/tags/linuxkernel</div><div>&quot; set tags+=~/.vim/tags/sdl </div><div>&quot; set tags+=~/.vim/tags/qt4 </div><div></div><div>&quot; build tags of your own project with CTRL+F12 </div><div>map &lt;C-F11&gt; :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .&lt;CR&gt; </div><div>noremap &lt;F11&gt; :!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .&lt;cr&gt; </div><div>inoremap &lt;F11&gt; &lt;Esc&gt;:!ctags -R --c++-kinds=+p --fields=+iaS --extra=+q .&lt;cr&gt; </div><div></div><div>&quot; OmniCppComplete </div><div>&quot; let OmniCpp_NamespaceSearch = 1 </div><div>&quot; let OmniCpp_GlobalScopeSearch = 1 </div><div>&quot; let OmniCpp_ShowAccess = 1 </div><div>&quot; let OmniCpp_MayCompleteDot = 1 </div><div>&quot; let OmniCpp_MayCompleteArrow = 1 </div><div>&quot; let OmniCpp_MayCompleteScope = 1 </div><div>&quot; let OmniCpp_DefaultNamespaces = [&quot;std&quot;, &quot;_GLIBCXX_STD&quot;] </div><div></div><div>&quot; automatically open and close the popup menu / preview window </div><div>au CursorMovedI,InsertLeave * if pumvisible() == 0|silent! pclose|endif </div><div>set completeopt=menuone,menu,longest,preview</div><div></div><div></div><div>let g:SuperTabRetainCompletionType = 2</div><div>let g:SuperTabDefaultCompletionType = &quot;&lt;C-X&gt;&lt;C-O&gt;&quot; </div><div>let g:AutoComplPop_MappingDriven = 0</div><div></div><div>let g:acp_enableAtStartup = 1</div><div>let g:acp_ignorecaseOption = 1</div><div>let g:acp_completeOption = '.,w,b,k'</div><div></div><div>" """""""""""""""""""""""""""""configuration for neocomplcache""""""""""""""""""""""""""""</div><div>" Disable AutoComplPop.</div><div>let g:acp_enableAtStartup = 0</div><div></div><div>" Use neocomplcache.</div><div>let g:neocomplcache_enable_at_startup = 1 </div><div></div><div>" Use smartcase.</div><div>let g:neocomplcache_enable_smart_case = 1</div><div></div><div>" Use camel case completion.</div><div>let g:neocomplcache_enable_camel_case_completion = 1</div><div></div><div>" Use underbar completion.</div><div>let g:neocomplcache_enable_underbar_completion = 1</div><div></div><div>" Set minimum syntax keyword length.</div><div>let g:neocomplcache_min_syntax_length = 1</div><div></div><div>" set the max list in the popup menu. increase the speed</div><div>let g:neocomplcache_max_list=20</div><div></div><div>" Define keyword.</div><div>if !exists('g:neocomplcache_keyword_patterns')</div><div><span style="white-space:pre">	</span>let g:neocomplcache_keyword_patterns = {}</div><div>endif</div><div><span style="white-space:pre">	</span>let g:neocomplcache_keyword_patterns['default'] = '\h\w*'</div><div></div><div>let g:neocomplcache_auto_completion_start_length=1</div><div>" ignore letter case</div><div>let g:neocomplcache_enable_ignore_case=1</div><div>" """""""""""""""""""""""""""""configuration for neocomplcache""""""""""""""""""""""""""""</div><div></div><div></div><div>" """"""""""""""""""""""""""auto complete () "" """"""""""""""""""""""""""""""""""""""""</div><div>:inoremap ( ()&lt;ESC&gt;i</div><div>:inoremap ) &lt;c-r&gt;=ClosePair(&#39;)&#39;)&lt;CR&gt;</div><div>:inoremap { {}&lt;ESC&gt;i</div><div>:inoremap } &lt;c-r&gt;=ClosePair(&#39;}&#39;)&lt;CR&gt;</div><div>:inoremap [ []&lt;ESC&gt;i</div><div>:inoremap ] &lt;c-r&gt;=ClosePair(&#39;]&#39;)&lt;CR&gt;</div><div>:inoremap &lt; &lt;&gt;&lt;ESC&gt;i</div><div>:inoremap &gt; &lt;c-r&gt;=ClosePair(&#39;&gt;&#39;)&lt;CR&gt;</div><div></div><div>function ClosePair(char)</div><div>if getline('.')[col('.') - 1] == a:char</div><div><span style="white-space:pre">	</span>return &quot;\&lt;Right&gt;&quot;</div><div>else</div><div><span style="white-space:pre">	</span>return a:char</div><div>endif</div><div>endf</div><div>" """"""""""""""""""""""""""auto complete () "" """"""""""""""""""""""""""""""""""""""""</div><div></div><div>" """"""""""""""""""""""""""""line number"""""""""""""""""""""""""""""""""""""""""""""'</div><div>set nu</div><div>" """"""""""""""""""""""""""""line number"""""""""""""""""""""""""""""""""""""""""""""</div><div></div><div>" """""""""""""""""""""""""""""auto indent """"""""""""""""""""""""""""""""""""""""</div><div>set autoindent</div><div>set cindent</div><div>" """""""""""""""""""""""""""""auto indent """"""""""""""""""""""""""""""""""""""""</div><div></div><div>" """""""""""""""""""""""""""""syntax on"""""""""""""""""""""""""""""""""""""""""""""</div><div>syntax on</div><div>" """""""""""""""""""""""""""""""syntax on """"""""""""""""""""""""""""""""""""""""""""</div><p>需要注意的是，默认的情况下vim是不会加载 set tags+=~/.vim/tags/c文件的，需要使用命令：NeoComplCacheCachingTags</p><p> </p><p> 暂时仅仅能够完成的一个文件的代码提示，下面几篇中还将介绍如何使用vim来管理项目文件，如何使用vim来debug c程序。</p></div><img src="http://www.cnblogs.com/xuqiang/aggbug/2016475.html?type=1" width="1" height="1" alt=""><p>作者: <a href="http://www.cnblogs.com/xuqiang/">qiang.xu</a> 发表于 2011-04-15 13:05 <a href="http://www.cnblogs.com/xuqiang/archive/2011/04/15/2016475.html">原文链接</a></p><p>评论: 14　<a href="http://www.cnblogs.com/xuqiang/archive/2011/04/15/2016475.html#pagedcomment">查看评论</a>　<a href="http://www.cnblogs.com/xuqiang/archive/2011/04/15/2016475.html#commentform">发表评论</a></p><hr><p>最新新闻：<br>· <a href="http://news.cnblogs.com/n/97631/">华为高管称仍将继续在美国进行收购</a><span style="color:gray">(2011-04-15 22:55)</span><br>· <a href="http://news.cnblogs.com/n/97630/">Twitter创始人斯通自嘲早应遭到负面报道</a><span style="color:gray">(2011-04-15 22:42)</span><br>· <a href="http://news.cnblogs.com/n/97629/">这次的科技泡沫不一样（连载1）</a><span style="color:gray">(2011-04-15 22:39)</span><br>· <a href="http://news.cnblogs.com/n/97628/">Myspace音乐首席技术官沙皮罗宣布辞职</a><span style="color:gray">(2011-04-15 22:35)</span><br>· <a href="http://news.cnblogs.com/n/97627/">MeeGo受手机厂商青睐阵营不断扩大</a><span style="color:gray">(2011-04-15 22:33)</span><br></p><p>编辑推荐：<a href="http://www.cnblogs.com/JeffreyZhao/archive/2011/04/15/jscex-status-uglifyjs-parser-and-aot-compiler.html">Jscex项目现状：UglifyJS解析器及AOT编译器</a><br></p><p>网站导航：<a href="http://www.cnblogs.com">博客园首页</a>  <a href="http://home.cnblogs.com/">我的园子</a>  <a href="http://news.cnblogs.com">新闻</a>  <a href="http://home.cnblogs.com/ing/">闪存</a>  <a href="http://home.cnblogs.com/group/">小组</a>  <a href="http://space.cnblogs.com/q/">博问</a>  <a href="http://kb.cnblogs.com">知识库</a></p></p>