---
layout: post
title:  "node.js-v0.8API解读（3）- api的新增部分"
date:   2012-07-02 17:20:40
author: snoopyxdy
categories: program
---

## node.js-v0.8API解读（3）- api的新增部分
### by snoopyxdy
### at 2012-07-02 17:20:40
### original <http://snoopyxdy.blog.163.com/blog/static/601174402012624741647>

<div><span style="font-family:Arial,Helvetica,simsun,u5b8bu4f53;line-height:25px">以下是常用node.js-v0.8的新增API：</span><div><span style="font-family:Arial,Helvetica,simsun,u5b8bu4f53;line-height:25px"><br></span></div><div><b><i><span style="font-family:Arial,Helvetica,simsun,u5b8bu4f53;line-height:25px">1、</span><font face="Arial, Helvetica, simsun, u5b8bu4f53"><span style="line-height:25px">child_process</span></font></i></b></div><div><font face="Arial, Helvetica, simsun, u5b8bu4f53"><span style="line-height:25px"><div>silent option to child_process.fork() - stdout and stderr won't be shared with parent.</div><div>//在child_process.fork()方法可以设置silent配置，这样子进程的就不会进行stdout输出到屏幕了</div><div><br></div><div>.disconnect() when using child_process.fork() this will allow the child to die gracefully.</div><div>//执行此方法，将会把  <span style="line-height:22px">child_process.fork() 执行的子进程优雅的退出</span></div><div><span style="line-height:22px"><br></span></div><div>stdio option for child_process.spawn() - configuration of child's stdio (file descriptors).</div><div>//可以对child_process.spawn()方法做stdio的设置，具体设置见DOC</div><div><br></div><div>detached option for child_process.spawn() - make the child a process group leader (see docs)</div><div>//detached分离子进程，这样子进程就将从node的parent进程中的event loop中剥离，见DOC</div><div><br></div><div>child.send() can now send net.Server and net.Socket as second argument.</div></span></font></div><div><font face="Arial, Helvetica, simsun, u5b8bu4f53"><span style="line-height:25px">//看了官方文档的事例，表示child.send()可以讲server或者socket对象传递给子进程，这样可以在子进程做响应处理了。</span></font></div><div><font face="Arial, Helvetica, simsun, u5b8bu4f53"><span style="line-height:25px"><br></span></font></div><div><font face="Arial, Helvetica, simsun, u5b8bu4f53"><b><i>2、fs</i></b></font></div><div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53">fs.appendFile() and fs.appendFileSync().</div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53">//往文件的最后增加内容，相见api</div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><br></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53">wx, wx+, ax, and ax+ modes to fs.open() and fs.openSync().</div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53">//新增以上这些模式打开文件，x表示 <span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto">exclusive mode 独家模式，其他进程无法访问这个文件了</span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><b><i>3、http</i></b></span></div><div><span style="text-align:-webkit-auto"><font><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px">callback optional argument to server.close().</div><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px">//为server.close()方法新增了一个可选的回调函数</div><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px"><br></div><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px">sendDate property to http.ServerResponse.</div><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px">//为 http.ServerResponse 类添加一个sendDate属性</div><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px">//当设置response.<span style="line-height:24px">sendDate</span><span style="line-height:24px"> 为 ture 时，将会在响应头上加入，默认是true</span></div><div><div style="color:rgb(84,84,84);display:inline-block;margin-right:0.5em;font-weight:bold;vertical-align:top;white-space:pre-wrap;font-family:&#39;Lucida Grande&#39;,sans-serif;font-size:12px;line-height:normal">//Date:</div><div style="font-family:Consolas,&#39;Lucida Console&#39;,monospace;font-size:12px;white-space:pre-wrap;display:inline;margin-right:100px;word-break:break-all;margin-top:1px;line-height:normal">Mon, 02 Jul 2012 08:59:35 GMT</div></div><div><div style="font-family:Consolas,&#39;Lucida Console&#39;,monospace;font-size:12px;white-space:pre-wrap;display:inline;margin-right:100px;word-break:break-all;margin-top:1px;line-height:normal"><br></div></div><div style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:24px">http.request() and http.get() can accept as their argument a url that is parsed with url.parse()</div></font></span></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">//这2个方法可以接受url.parse()生产的对象作为参数</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><br></span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><b><i>4、https</i></b></span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">ciphers, rejectUnauthorized option to https.request() and https.get().<br>//新增以上2个配置，详细见DOC</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><br></span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><i><b>5、net</b></i></span></font></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif">net.connect(options, [connectionListener]).</span></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif">//在创建connect套接字时就将 connect事件的监听函数作为第二个参数传入</span></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif"><br></span></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">callback optional argument to server.close().</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">//添加一个可选的回调函数</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><br></span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">server.listen({ fd: someNumber }) to listen on arbitrary file descriptors.</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">//传入任意的文件描述符，这些文件描述符假定都绑定到了 一个端口或者域名套接字</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><br></span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><b><i>6、process</i></b></span></font></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif">process.abort().</span></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif">//退出进程，并且产生一个核心文件，不大明白</span></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif"><br></span></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">process.hrtime(), hi-res timer with up to nanosecond granularity.</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px">//返回纳秒时间</span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><br></span></font></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><b><i>7、querystring</i></b></span></font></div><div style="text-align:-webkit-auto"><span style="font-size:15px;line-height:24px;font-family:Georgia,FreeSerif,Times,serif">querystring.parse(str, [sep], [eq], [options]).</span></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px">//新增一个处理字符串的方法，可以用来替换分割等等，详见API</span></font></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="font-family:Arial,Helvetica,simsun,u5b8bu4f53"><span style="font-family:Georgia,FreeSerif,Times,serif;font-size:15px;line-height:22px;text-align:-webkit-auto"><br></span></div><div style="text-align:-webkit-auto"><font face="Georgia, FreeSerif, Times, serif"><span style="font-size:15px;line-height:24px"><br></span></font></div></div></div>