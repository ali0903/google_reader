<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>id 的选择器为什么要这么写 li#first？</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/google_reader/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/google_reader/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/google_reader/">Google Reader</a></h1>
              <a class="extra" href="/google_reader/">home</a>
            </div>

                <h2>id 的选择器为什么要这么写 li#first？</h2>
<p class="meta">2012-09-26 18:00</p>

<div class="post">
<h2>id 的选择器为什么要这么写 li#first？</h2>

<h3>by 司徒正美</h3>

<h3>at 2012-09-26 10:00:00</h3>

<h3>original <a href="http://www.cnblogs.com/rubylouvre/archive/2012/09/26/2524700.html">http://www.cnblogs.com/rubylouvre/archive/2012/09/26/2524700.html</a></h3>

<div><p><strong>一. 一个疑问？</strong></p><p>看到过一篇关于 CSS 的文章，其中说到：对于类似 li#first 这样的选择器，由于使用 id 就已经可以确定元素了，没有必要再写上前面的 li, 直接写上 #first 这样的 id 选择器就可以了。听起来说得不错，简单测试一下也没有问题。</p><p>可是，我们经常看到带有元素名称的选择器，例如，在微软的项目模板中就有大量的带有元素名称的选择器，如果没有用的话，为什么要这样写呢？</p><br>ul#navlist<br>{<br>    float: right;<br>}<br><br>ul#navlist li<br>{<br>    display: inline;<br>}<br><p><strong>二. 问题出现了！</strong></p><p>写一个简单的菜单，使用 ul 和 li 实现，菜单项之间使用边框来实现间隔线。</p><p>html 代码如下：</p><br><ul><br>    <li><a href="http://www.cnblogs.com/">Home</a></li><br>    <li><a href="http://www.cnblogs.com/rubylouvre/rss#">Store</a></li><br>    <li><a href="http://www.cnblogs.com/rubylouvre/rss#">ShoppingCart</a></li><br>    <li><a href="http://www.cnblogs.com/rubylouvre/rss#">Admin</a></li><br></ul><br><p>使用下面的样式表，首先通过为所有的超级链接增加一个左边框来画出间隔的虚线，然后将第一个菜单项的左边框去掉，我的第一个样式使用了 .first a。</p><br><br>ul#navlist li<br>{<br>    display: inline;<br>}<br>        <br>ul#navlist li a<br>{<br>    border-left: 1px dotted #8A8575;<br>    padding: 10px;<br>    margin-top: 10px;<br>    color: #8A8575;<br>    text-decoration: none;<br>    float: left;<br>}<br>        <br>.first a<br>{<br>    border: none;<br>}<br><p>看一下效果，完全没有反应。</p><p><img src="http://pic002.cnblogs.com/images/2012/13475/2012052822353075.png" alt=""></p><p>还有的地方说 id 选择器的级别比较高，那么将类改成 id 。</p><br><br><li><a href="http://www.cnblogs.com/">Home</a></li><br><br><p> 将样式表也进行相应的修改。</p><br><br>#first a<br>{<br>    border: none;<br>}<br><p>可是结果呢？岿然不动！</p><p><img src="http://pic002.cnblogs.com/images/2012/13475/2012052822402392.png" alt=""></p><p>用火狐的 firebug 看一看，被忽略了。</p><p><img src="http://pic002.cnblogs.com/images/2012/13475/2012052823085637.png" alt=""></p><p><strong>三. 探源</strong></p><p>为什么我的样式被秒杀了？</p><p>网上有大量的文章，但是说法并不一致，有的说要考虑三个级别，可是也有的说需要考虑四个级别，但是总的方向大致是关于层叠的。</p><p>不如到 W3C 的网站上看一个究竟。相关的标准在 <a title="W3C 的 CSS 标准" href="http://www.w3.org/TR/CSS/">这个页面</a> 可以看到，目前为止的 CSS 标准有三个: CSS1, CSS2, 以及 CSS3。</p><p>CSS1 是最早的标准，其中关于层叠顺序的描述在 <a href="http://www.w3.org/TR/REC-CSS1/#cascading-order">这里</a>，还提供了一个简单的示例进行说明。</p><br>LI            {...}  /* a=0 b=0 c=1 -&gt; specificity =   1 */<br>UL LI         {...}  /* a=0 b=0 c=2 -&gt; specificity =   2 */<br>UL OL LI      {...}  /* a=0 b=0 c=3 -&gt; specificity =   3 */<br>LI.red        {...}  /* a=0 b=1 c=1 -&gt; specificity =  11 */<br>UL OL LI.red  {...}  /* a=0 b=1 c=3 -&gt; specificity =  13 */ <br>#x34y         {...}  /* a=1 b=0 c=0 -&gt; specificity = 100 */ <br><br><p>在 CSS1 中将优先级分为三组，将 id 选择器作为 a 组，类选择器作为 b 组，元素名作为 c 组，每组中出现一次，计数一次，按照先 a 组进行比较，相同的情况下，使用 b 组进行比较，最后是 c 组。什么选择器的优先级别高，什么选择器提供的样式有效。比如在上面的例子中，第 5 组使用 id 的级别最高，所以，这组的样式设置生效，而其他的设置将会被忽略掉。</p><p><a href="http://www.w3.org/TR/CSS21/cascade.html#specificity">CSS21 标准</a></p><p>在 CSS2 中，又增加了关于行内说明 style 的组，所以参与比较的组成为了 4 组，其中 style 的优先级别最高。同样，在 CSS2 的标准说明中也提供了样例。</p><br> *             {}  /* a=0 b=0 c=0 d=0 -&gt; specificity = 0,0,0,0 */<br> li            {}  /* a=0 b=0 c=0 d=1 -&gt; specificity = 0,0,0,1 */<br> li:first-line {}  /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */<br> ul li         {}  /* a=0 b=0 c=0 d=2 -&gt; specificity = 0,0,0,2 */<br> ul ol+li      {}  /* a=0 b=0 c=0 d=3 -&gt; specificity = 0,0,0,3 */<br> h1 + *[rel=up]{}  /* a=0 b=0 c=1 d=1 -&gt; specificity = 0,0,1,1 */<br> ul ol li.red  {}  /* a=0 b=0 c=1 d=3 -&gt; specificity = 0,0,1,3 */<br> li.red.level  {}  /* a=0 b=0 c=2 d=1 -&gt; specificity = 0,0,2,1 */<br> #x34y         {}  /* a=0 b=1 c=0 d=0 -&gt; specificity = 0,1,0,0 */<br> style=&quot;&quot;          /* a=1 b=0 c=0 d=0 -&gt; specificity = 1,0,0,0 */<br><br><br><br><p style="color:green"><br></p><br><p>在这个示例中，style 的优先级别最高，所以将会覆盖掉通过 id 进行的设置，颜色为绿色。</p><p><strong>四. 解决问题</strong></p><p>通过上面的分析可以看到，仅仅提供选择器并不足以能够生效，还要看选择器的优先级别，在我们的问题中，即使使用 id 来选择第一个菜单项：#first a ，包括了一个 id 和一个元素名，那么所得的优先级别为：</p><p>a=0, b=1, c=0, d=1</p><p>可是，通用的选择器是这样的：ul#navlist li a，优先级中却包括了一个 id, 还有 3 个元素名称，所以优先级别为：</p><p>a=0, b=1, c=0, d=3</p><p>所以我们的选择器没有比过通用的选择器，悲剧发生了！</p><p>知道了原因，问题也就简单了，提高我们选择器的优先级别，超过通用选择器的优先级就可以了，比如，我们可以写成这样：</p><br><br>ul#navlist li#first a<br><br><p>现在的优先级是多少呢？</p><p>a=0, b=2, c=0, d=3</p><p>在 b 组比较的时候就已经超过了，看看是否已经成功了！</p><p><img src="http://pic002.cnblogs.com/images/2012/13475/2012052823024218.png" alt=""></p><p>还可以加上重要性说明，也可以解决。!important 必须写在样式与分号之间，每个样式必须单独声明。</p><br>#first a<br>{<br>    border: none !important;<br>}<br><br><p>看来选择器不是那么简单呀！</p></div>


<div></div>


<p><img src="http://www.cnblogs.com/rubylouvre/aggbug/2524700.html?type=1" width="1" height="1" alt=""><p><a href="http://www.cnblogs.com/rubylouvre/archive/2012/09/26/2524700.html">本文链接</a></p></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/lyuehh/">github.com/lyuehh</a><br />
                  <a href="http://twitter.com/lyuehh/">twitter.com/lyuehh</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
