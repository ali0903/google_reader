<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>可省略的html标签及其实践 （本文不讨论xhtml、xml语法）</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>可省略的html标签及其实践 （本文不讨论xhtml、xml语法）</h2>
<p class="meta">03 Dec 2012</p>

<div class="post">
<h2>可省略的html标签及其实践 （本文不讨论xhtml、xml语法）</h2>

<h3>by 司徒正美</h3>

<h3>at 2012-12-03 15:10:00</h3>

<h3>original <a href="http://www.cnblogs.com/rubylouvre/archive/2012/12/03/2799538.html">http://www.cnblogs.com/rubylouvre/archive/2012/12/03/2799538.html</a></h3>

<p>原贴地址：http://moonless.net/demo/optional-tags/<p>有些html元素的结束标签是可选的，如：<code><a href="http://www.w3.org/TR/html5/the-body-element.html#the-body-element">body</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-colgroup-element.html#the-colgroup-element">colgroup</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-dd-element.html#the-dd-element">dd</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-dt-element.html#the-dt-element">dt</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-head-element.html#the-head-element">head</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-html-element.html#the-html-element">html</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-li-element.html#the-li-element">li</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-optgroup-element.html#the-optgroup-element">optgroup</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-option-element.html#the-option-element">option</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-p-element.html#the-p-element">p</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-td-element.html#the-td-element">td</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-tfoot-element.html#the-tfoot-element">tfoot</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-th-element.html#the-th-element">th</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-thead-element.html#the-thead-element">thead</a></code>、 <code><a href="http://www.w3.org/TR/html5/the-tr-element.html#the-tr-element">tr</a></code> 等<p>这些标签不一定需要结束是因为在多数情况下，它们的结束标签通过文档中的另一个标签隐式声明了。例如：在多数web页中，一个段落 <code>&lt;p&gt;</code> 后面通常跟着另一个段落或其它块级标签，浏览器会根据下一个段落的开始标签结束当前段落。<p>而像 <code>&lt;colgroup&gt;</code> 这样的标签，它们可以包含或不含类似 <code>&lt;col&gt;</code> 这样的特定标签。如果 <code>&lt;colgroup&gt;</code> 没包含 <code>&lt;col&gt;</code> ，即使不写 <code>&lt;/colgroup&gt;</code> 也不会引起任何错误（列数可以通过span属性定义）。<p><strong><i>√</i> 不写结束标签能提高页面加载速度</strong></p><p>不写结束标签的最大好处是：由于这些标签实际占用了字符，省略它们可以让页面size变得更小。如果你正在寻找提高页面加载速度的方法，处理掉这些可选的结束标签是一个不错的开始。对那些有很多段落、表格的页面来说，这样做能节省不少开销。<p><strong><i>√</i> 不写结束标签能避免textNode出现在元素前后</strong></p><p>我们知道根据<a href="http://blog.moonless.net/2011/04/%E5%BD%92%E6%A1%A3white-space-processing-model%E7%AE%80%E4%BB%8B/">white-space processing model</a>，源码中标签前后的<a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character"><strong>空白字符</strong></a>在生成dom时，会按照规则进行忽略或合并。后者将成<a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character"><strong>空白字符</strong></a>合并为一个空格，这会带来不少麻烦。<p>例如将一组块级元素 <code>display</code> 为 <code>inline|inline-block</code> 后，处理其间的空格会很痛苦。<p><strong><i>×</i> 不写结束标签可能带来的问题</strong></p>这里列几个重要的：<dl><dt>写结束标签是为了约束结构<dd>虽然省略了结束标签的web页能快速加载，但它也许马上会变成你的维护负担。比如，为省略了结束标签的表格添加新行或列时你可能会觉得很痛苦。虽然能用插入缩进来解决，但这同时抵消了不写结束标签提高的那一点点工作效率。<dt>css、js依赖完整元素<dd>虽然多数浏览器可以显示并渲染标签没有闭合的元素，但主动闭合标签能明确js和css的行为。如果你在使用非常精确的布局，并省去结束标签，这同时意味着放弃了对精度、健壮度的控制——你让浏览器自行判断标签的结束位置，但有时它很棒，有时它很囧……<dt>结束标签有时不能省略<dd>在HTML5中，<code>&lt;/p&gt;</code> 标签在后面直接跟大约25种元素时可以被省略。但HTML5中有超过100种元素，你能记住可省略结束标签的每种情形吗？也许不省略它们更容易些。</dd></dt></dd></dt></dd></dt></dl><hr><p><strong>可选的html标签及其约束</strong></p><p><b>译注1：</b>下表中，如非特别说明， <a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character"><strong>空白字符</strong></a> 在<strong>文档中</strong>、<strong>节点前后</strong>都是可以存在或忽略的<p><b>译注2：</b>“<a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character"><strong>空白字符</strong></a>”是指：空格(U+0020)、制表符(U+0009)、换行(U+000A)、回车(U+000D)、换页(U+000C)。<p><b>译注3：</b>下表中，“<strong>元素</strong>”均指 nodeType=1 的dom节点）<p><b>注1：</b>省略元素的开始标签并不意味着开始标签不存在，它仍是隐式存在的。例如，一个HTML文档总是有一个根html元素，尽管字符串 <code>&lt;html&gt;</code> 并未在文档中出现。）<p><b>注2：</b>如果<a href="http://www.w3.org/TR/html5/syntax.html#syntax-start-tag">开始标签</a>含有任何<a href="http://www.w3.org/TR/html5/syntax.html#attributes-0">属性</a>定义，<a href="http://www.w3.org/TR/html5/syntax.html#syntax-start-tag">开始标签</a>不能省略<table><col><col><thead><tr><th>可省标签<th>省略前提<tbody><tr><th><code>&lt;html&gt;</code><td><ul><li>它的内容不能以 <a href="http://www.w3.org/TR/html5/syntax.html#syntax-comments">注释</a> 作为开始</li></ul><tr><th><code>&lt;/html&gt;</code><td><ul><li>当前 <code><a href="http://www.w3.org/TR/html5/the-html-element.html#the-html-element">html</a></code> 元素的后面不能出现 <a href="http://www.w3.org/TR/html5/syntax.html#syntax-comments">注释</a></li></ul><tr><th><code>&lt;head&gt;</code><td><ul><li>它是空的<li>它的内容以元素作为开始</li></li></ul><tr><th><code>&lt;/head&gt;</code><td><ul><li>当前 <code><a href="http://www.w3.org/TR/html5/the-head-element.html#the-head-element">head</a></code> 元素的nextSibling不能是 <a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character">空白字符</a> 或 <a href="http://www.w3.org/TR/html5/syntax.html#syntax-comments">注释</a></li></ul><tr><th><code>&lt;body&gt;</code><td><ul><li>它是空的<li>它的内容不能以 <a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character">空白字符</a>、<a href="http://www.w3.org/TR/html5/syntax.html#syntax-comments">注释</a>、<code><a href="http://www.w3.org/TR/html5/the-script-element.html#the-script-element">script</a></code> 元素、<code><a href="http://www.w3.org/TR/html5/the-style-element.html#the-style-element">style</a></code> 元素作为开始</li></li></ul><tr><th><code>&lt;/body&gt;</code><td><ul><li>当前 <code><a href="http://www.w3.org/TR/html5/the-body-element.html#the-body-element">body</a></code> 元素的后面不能出现 <a href="http://www.w3.org/TR/html5/syntax.html#syntax-comments">注释</a></li></ul><tr><th><code>&lt;/li&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-li-element.html#the-li-element">li</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-li-element.html#the-li-element">li</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-li-element.html#the-li-element">li</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/dt&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-dt-element.html#the-dt-element">dt</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-dt-element.html#the-dt-element">dt</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-dd-element.html#the-dd-element">dd</a></code></li></ul><tr><th><code>&lt;/dd&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-dd-element.html#the-dd-element">dd</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-dd-element.html#the-dd-element">dd</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-dt-element.html#the-dt-element">dt</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-dd-element.html#the-dd-element">dd</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/p&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-p-element.html#the-p-element">p</a></code> 元素后面的元素是 <code><a href="http://www.cnblogs.com/rubylouvre/the-address-element.html#the-address-element">address</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-article-element.html#the-article-element">article</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-aside-element.html#the-aside-element">aside</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-blockquote-element.html#the-blockquote-element">blockquote</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/obsolete.html#dir">dir</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-div-element.html#the-div-element">div</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-dl-element.html#the-dl-element">dl</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-fieldset-element.html#the-fieldset-element">fieldset</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-footer-element.html#the-footer-element">footer</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-form-element.html#the-form-element">form</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements">h1</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements">h2</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements">h3</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements">h4</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements">h5</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-h1-h2-h3-h4-h5-and-h6-elements.html#the-h1-h2-h3-h4-h5-and-h6-elements">h6</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-header-element.html#the-header-element">header</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-hgroup-element.html#the-hgroup-element">hgroup</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-hr-element.html#the-hr-element">hr</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-menu-element.html#the-menu-element">menu</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-nav-element.html#the-nav-element">nav</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-ol-element.html#the-ol-element">ol</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-p-element.html#the-p-element">p</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-pre-element.html#the-pre-element">pre</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-section-element.html#the-section-element">section</a></code>、 <code><a href="http://www.cnblogs.com/rubylouvre/the-ul-element.html#the-ul-element">ul</a></code><p><b>译注5：</b>规范里 <code><a href="http://www.cnblogs.com/rubylouvre/the-table-element.html#the-table-element">table</a></code> 也在其中，但实际上它的默认 <code>display</code> 为 <code>table</code> ，在一些浏览器中也会闭合错误，所以大体上认为应增加一种约束，即：标签的默认 <code>display</code> 应为 <code>block</code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-p-element.html#the-p-element">p</a></code> 元素是父元素的最后一个子元素，同时父元素不能是 <code><a href="http://www.w3.org/TR/html5/the-a-element.html#the-a-element">a</a></code></li></p></li></ul><tr><th><code>&lt;/rt&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-rt-element.html#the-rt-element">rt</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-rt-element.html#the-rt-element">rt</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-rp-element.html#the-rp-element">rp</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-rt-element.html#the-rt-element">rt</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/rp&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-rp-element.html#the-rp-element">rp</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-rt-element.html#the-rt-element">rt</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-rp-element.html#the-rp-element">rp</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-rp-element.html#the-rp-element">rp</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/optgroup&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-optgroup-element.html#the-optgroup-element">optgroup</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-optgroup-element.html#the-optgroup-element">optgroup</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-optgroup-element.html#the-optgroup-element">optgroup</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/option&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-option-element.html#the-option-element">option</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-option-element.html#the-option-element">option</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-optgroup-element.html#the-optgroup-element">optgroup</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-option-element.html#the-option-element">option</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;colgroup&gt;</code><td><ul><li>它不能是空的<li>它的内容以 <code><a href="http://www.w3.org/TR/html5/the-col-element.html#the-col-element">col</a></code> 元素作为开始，同时在它前面的元素不能是省略了结束标签的 <code><a href="http://www.w3.org/TR/html5/the-colgroup-element.html#the-colgroup-element">optgroup</a></code> 。</li></li></ul><tr><th><code>&lt;/colgroup&gt;</code><td><ul><li>当前 <code><a href="http://www.w3.org/TR/html5/the-colgroup-element.html#the-colgroup-element">optgroup</a></code> 元素的nextSibling不能是 <a href="http://www.w3.org/TR/html5/common-microsyntaxes.html#space-character">空白字符</a> 或 <a href="http://www.w3.org/TR/html5/syntax.html#syntax-comments">注释</a></li></ul><tr><th><code>&lt;/thead&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-thead-element.html#the-thead-element">thead</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-tfoot-element.html#the-tfoot-element">tfoot</a></code></li></ul><tr><th><code>&lt;tbody&gt;</code><td><ul><li>它不能是空的<li>它的内容以tr元素作为开始，同时在它前面的元素不能是省略了结束标签的 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code>、<code><a href="http://www.w3.org/TR/html5/the-thead-element.html#the-thead-element">thead</a></code>、<code><a href="http://www.w3.org/TR/html5/the-tfoot-element.html#the-tfoot-element">tfoot</a></code> 。</li></li></ul><tr><th><code>&lt;/tbody&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-tfoot-element.html#the-tfoot-element">tfoot</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/tfoot&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-tfoot-element.html#the-tfoot-element">tfoot</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-tbody-element.html#the-tbody-element">tbody</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-tfoot-element.html#the-tfoot-element">tfoot</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/tr&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-tr-element.html#the-tr-element">tr</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-tr-element.html#the-tr-element">tr</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-tr-element.html#the-tr-element">tr</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/td&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-td-element.html#the-td-element">td</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-td-element.html#the-td-element">td</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-th-element.html#the-th-element">th</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-td-element.html#the-td-element">td</a></code> 元素是父元素的最后一个子元素</li></li></ul><tr><th><code>&lt;/th&gt;</code><td><ul><li>在当前 <code><a href="http://www.w3.org/TR/html5/the-th-element.html#the-th-element">th</a></code> 元素后面的元素是 <code><a href="http://www.w3.org/TR/html5/the-td-element.html#the-td-element">td</a></code> 或 <code><a href="http://www.w3.org/TR/html5/the-th-element.html#the-th-element">th</a></code><li>当前 <code><a href="http://www.w3.org/TR/html5/the-th-element.html#the-th-element">th</a></code> 元素是父元素的最后一个子元素</li></li></ul></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></td></th></tr></tbody></th></th></tr></thead></table><p><strong>参考资料：</strong></p><blockquote><p><a href="http://webdesign.about.com/od/htmltags/qt/optional-html-end-tags-when-to-include-them.htm">http://webdesign.about.com/od/htmltags/qt/optional-html-end-tags-when-to-include-them.htm</a><p><a href="http://www.w3.org/TR/html5/syntax.html#optional-tags">http://www.w3.org/TR/html5/syntax.html#optional-tags</a><p><a href="http://www.w3.org/TR/html5/syntax.html#raw-text-elements">http://www.w3.org/TR/html5/syntax.html#raw-text-elements</a></p></p></p></blockquote><img src="http://www.cnblogs.com/rubylouvre/aggbug/2799538.html?type=1" width="1" height="1" alt=""><p><a href="http://www.cnblogs.com/rubylouvre/archive/2012/12/03/2799538.html">本文链接</a></p></p></p></p></p></p></p></p></p></p></p></p></p>


</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/yourusername/">github.com/yourusername</a><br />
                  <a href="http://twitter.com/yourusername/">twitter.com/yourusername</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
