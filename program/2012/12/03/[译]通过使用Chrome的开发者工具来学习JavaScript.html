<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>[译]通过使用Chrome的开发者工具来学习JavaScript</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/google_reader/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/google_reader/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/google_reader/">Google Reader</a></h1>
              <a class="extra" href="/google_reader/">home</a>
            </div>

                <h2>[译]通过使用Chrome的开发者工具来学习JavaScript</h2>
<p class="meta">2012-12-03 00:32</p>

<div class="post">
<h2>[译]通过使用Chrome的开发者工具来学习JavaScript</h2>

<h3>by 紫云飞</h3>

<h3>at 2012-12-02 16:32:00</h3>

<h3>original <a href="http://www.cnblogs.com/ziyunfei/archive/2012/12/02/2797992.html">http://www.cnblogs.com/ziyunfei/archive/2012/12/02/2797992.html</a></h3>

<div><p>原文:<a href="https://gist.github.com/4158604">https://gist.github.com/4158604</a></p><hr><p>本文作者是Peter Rybin,Chrome开发者工具团队成员.</p><p>本文中,我们将通过使用Chrome的开发者工具,来学习JavaScript中的两个重要概念"闭包"和"内部属性".</p><p><strong>闭包</strong></p><p>首先要讲的是闭包(closure) – JavaScript中最有名的东西之一.一个闭包就是一个使用了外部变量的函数.查看下面的例子:</p><div><div style="background-color:#f5f5f5;border:1px solid #cccccc;padding:10px"><span style="color:#0000ff">function</span><span style="color:#000000"> A(a, b, c) {<br>  </span><span style="color:#0000ff">var</span> ar =<span style="color:#000000"> [a, b, c];<br>  </span><span style="color:#0000ff">return</span> <span style="color:#0000ff">function</span><span style="color:#000000"> B(i) {<br>    </span><span style="color:#0000ff">return</span><span style="color:#000000"> ar[i];<br>  };<br>}<br><br></span><span style="color:#0000ff">var</span> b = A('Here', 'I', 'am'<span style="color:#000000">);<br>console.log( b(</span>1) );</div></div><p>函数声明之后的第一条语句调用了函数A,函数A创建了一个值为数组[a,b,c]的局部变量ar,返回了一个函数<code>B</code>(存储在了变量<code>b中</code>),然后运行结束.</p><p>第二条语句调用了函数<code>B</code> (<code>b</code>),返回并打印出了数组ar.这就意味着<code>A中的数组ar在</code><code>A结束执行后仍然存在</code>.但是它存储在什么地方呢?当然,在<code>b上</code>!但是究竟是存在b的哪里呢?某个属性中?不是的.</p><p>这是JavaScript语言的一个核心特性:一个函数可以持有外层作用域的变量,并且除了调用该函数以外没有任何其他方法可以访问到这些变量.</p><p><img style="max-width:100%" src="http://pic002.cnblogs.com/images/2012/116671/2012120216152039.jpg" alt=""></p><p>从现在开始,chrome的开发者工具可以让闭包中的外部变量现形.在监控表达式(Watch Expressions)面板中查看函数实例<code>b,展开它的属性后,</code>应该会有一个称为<code>&lt;function scope&gt;的</code>子节点.所有被绑定的闭包变量都能在这里看到,这些变量就是在函数调用时可能会被用到的变量.</p><p><strong>内部属性</strong></p><p>开发者工具还能显示出另外一个东西,叫做内部属性(internal property).</p><p>假设你的代码中有个变量<code>s,而且还执行了下面这样的操作</code>:</p><div><div style="background-color:#f5f5f5;border:1px solid #cccccc;padding:10px">s.substring(1, 4)  <span style="color:#008000">//</span><span style="color:#008000"> 返回'ell'</span></div></div><p>你觉得<code>s肯定是个字符串值吗? 这可不一定</code>.它也有可能是个字符串包装对象.尝试下面的监控表达式:</p><div style="background-color:#f5f5f5;border:1px solid #cccccc;padding:10px">"hello"<span style="color:#000000"><br>Object(</span>"hello")</div><p>第一个表达式是一个普通的字符串字面量,第二个是一个功能完整(full-featured)的对象.令人费解的是,这两个值几乎有完全相同的表现.但是第二个表达式才真正的拥有自己的属性,并且你也可以在它身上添加自定义的属性.展开它的所有属性你会看到,它不是一个完全常规的对象:它有一个内部属性[[PrimitiveValue]] ,被包装的字符串值就存储在这个属性里面.你不能在JavaScript代码中访问到这个内部属性,但是你能在开发者工具的中看到它.</p><p><img src="http://pic002.cnblogs.com/images/2012/116671/2012120216075427.png" alt=""></p><p>还有哪些值拥有内部属性?那就是绑定函数(bound function).绑定函数也算是一种包装对象,只不过被包装的是个函数.尝试执行下面的两条语句:</p><div><div style="background-color:#f5f5f5;border:1px solid #cccccc;padding:10px"><span style="color:#0000ff">function</span> Sum(a, b) { <span style="color:#0000ff">return</span> a +<span style="color:#000000"> b; }<br></span><span style="color:#0000ff">var</span> inc = Sum.bind(<span style="color:#0000ff">null</span>, 1); <span style="color:#008000">//</span><span style="color:#008000"> 将形参a绑定为1,this绑定为null</span></div></div><p>如果你把<code>Sum和</code><code>inc放在监控表达式面板中对比一下,你会看到</code>,它们都是函数,但<code>inc是一个不透明(non-transparent )的函数</code>:你看不到它的函数体内容,也不能看到它定义时的作用域.<code></code></p><p><img style="max-width:100%" src="http://pic002.cnblogs.com/images/2012/116671/2012120216151042.jpg" alt=""></p><p>这就是绑定函数的工作原理.在开发者工具中,你会看到[[TargetFunction]], [[BoundArgs]]以及[[BoundThis]]这三个内部属性.它们都表明了<code>inc是一个绑定函数</code>,以及一些更具体的信息:inc绑定的目标函数是<code>Sum</code>,绑定了一个参数<code>1,绑定的this值是n</code><code>ull</code><code></code>.</p><p><img style="max-width:100%" src="http://pic002.cnblogs.com/images/2012/116671/2012120216150940.jpg" alt=""></p></div>


<p><img src="http://www.cnblogs.com/ziyunfei/aggbug/2797992.html?type=1" width="1" height="1" alt=""><p><a href="http://www.cnblogs.com/ziyunfei/archive/2012/12/02/2797992.html">本文链接</a></p></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/lyuehh/">github.com/lyuehh</a><br />
                  <a href="http://twitter.com/lyuehh/">twitter.com/lyuehh</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
