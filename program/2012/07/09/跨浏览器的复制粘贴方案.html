<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>跨浏览器的复制粘贴方案</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/google_reader/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/google_reader/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/google_reader/">Google Reader</a></h1>
              <a class="extra" href="/google_reader/">home</a>
            </div>

                <h2>跨浏览器的复制粘贴方案</h2>
<p class="meta">2012-07-09 23:27</p>

<div class="post">
<h2>跨浏览器的复制粘贴方案</h2>

<h3>by 司徒正美</h3>

<h3>at 2012-07-09 15:27:00</h3>

<h3>original <a href="http://www.cnblogs.com/rubylouvre/archive/2012/07/09/2582737.html">http://www.cnblogs.com/rubylouvre/archive/2012/07/09/2582737.html</a></h3>

<p title="复制到剪切板">web开发中常常要实现“复制到剪切板”功能。这个功能很实用，但是由于安全问题，浏览器的限制越来越严，实现的方法也越来越有限了。Firefox默认下不能直接通过Javascript操作剪切板，必须开启相关的设置才行。想只通过Javascript技术实现跨浏览器的剪切板是行不通的。现在常用的方法是利用JavaScript+Flash实现，普遍流传的办法是_clipboard.swf，这是国外最早实现的（著名的Clipboard Copy解决方案:　<a href="http://www.jeffothy.com/weblog/clipboard-copy/">http://www.jeffothy.com/weblog/clipboard-copy/</a>）。但是很可惜，_clipboard.swf在新出来的flash10中无效，因为flash10中规定了只有在swf上进行了实际的操作（比如鼠标点击）才能启动剪切板。而_clipboard.swf方法的swf是隐藏的，通过JavaScript来操作flash的剪切板，显然没有对swf进行实际的用户操作。</p>


<p>针对这个，最近国外出现了一种新的方法，而且专门做了一个JavaScript库 <a href="http://code.google.com/p/zeroclipboard/">Zero Clipboard</a> ，它包含一个flash影片和一个JavaScript接口，这个flash是透明的（不是隐藏），用户不会察觉到它的存在。这个flash覆盖在一个DOM元素上，比如button，div之类，当点击这个DOM时，你实际点击的是这个flash，这个作用在flash上的动作能够开启flash的剪切板。这实际上就是一种clickjacking。</p>


<p title="复制到剪切板">DEMO页面 :  <a href="http://bowser.macminicolo.net/~jhuckaby/zeroclipboard/">http://bowser.macminicolo.net/~jhuckaby/zeroclipboard/</a></p>


<p>Zero Clipboard项目主页：　<a href="http://code.google.com/p/zeroclipboard/">http://code.google.com/p/zeroclipboard/</a> </p>


<p> <p title="复制到剪切板">网上流行的阿里妈妈的复制代码的实际来源：<a href="http://www.jeffothy.com/weblog/clipboard-copy/">http://www.jeffothy.com/weblog/clipboard-copy/</a></p><p title="复制到剪切板">zeroclipboard</p><pre>&lt;!doctype html&gt;&lt;html&gt;    &lt;head&gt;        &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=utf-8&quot; /&gt;        &lt;title&gt;复制到剪切板 by 司徒正美&lt;/title&gt;        &lt;script type=&quot;text/javascript&quot; src=&quot;ZeroClipboard.js&quot;&gt;&lt;/script&gt;        &lt;script language=&quot;JavaScript&quot;&gt;            function get(id) { return document.getElementById(id); }            function toClipboard(copy_id,input_id) {                var clip = new ZeroClipboard.Client();                clip.setHandCursor(true);                clip.setText(get(input_id).value);                clip.addEventListener(&#39;complete&#39;, function (client) {                    alert(&quot;Copy Ok!&quot;);                });                clip.glue(copy_id);            }        &lt;/script&gt;    &lt;/head&gt;    &lt;body&gt;        &lt;input type=&quot;text&quot; id=&quot;input_text&quot; /&gt;        &lt;input id=&quot;copy_button&quot; type=&quot;button&quot;  value=&quot;copy&quot; onmouseOver=&quot;toClipboard(this.id,&#39;input_text&#39;)&quot; /&gt;        &lt;br/&gt;        &lt;input type=&quot;text&quot; id=&quot;input_text2&quot; /&gt;        &lt;input id=&quot;copy_button2&quot; type=&quot;button&quot;  value=&quot;copy&quot; onmouseOver=&quot;toClipboard(this.id,&#39;input_text2&#39;)&quot;/&gt;        &lt;br/&gt;        &lt;input type=&quot;text&quot; id=&quot;input_text3&quot; /&gt;        &lt;input id=&quot;copy_button3&quot; type=&quot;button&quot;  value=&quot;copy&quot; onmouseOver=&quot;toClipboard(this.id,&#39;input_text3&#39;)&quot;/&gt;    &lt;/body&gt;&lt;/html&gt;</pre><img src="http://www.cnblogs.com/rubylouvre/aggbug/2582737.html?type=1" width="1" height="1" alt=""><p><a href="http://www.cnblogs.com/rubylouvre/archive/2012/07/09/2582737.html">本文链接</a></p></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/lyuehh/">github.com/lyuehh</a><br />
                  <a href="http://twitter.com/lyuehh/">twitter.com/lyuehh</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
