<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>经典算法题每日演练——第五题 字符串相似度</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/google_reader/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/google_reader/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/google_reader/">Google Reader</a></h1>
              <a class="extra" href="/google_reader/">home</a>
            </div>

                <h2>经典算法题每日演练——第五题 字符串相似度</h2>
<p class="meta">2012-11-12 07:45</p>

<div class="post">
<h2>经典算法题每日演练——第五题 字符串相似度</h2>

<h3>by 一线码农</h3>

<h3>at 2012-11-11 23:45:00</h3>

<h3>original <a href="http://www.cnblogs.com/huangxincheng/archive/2012/11/11/2765633.html">http://www.cnblogs.com/huangxincheng/archive/2012/11/11/2765633.html</a></h3>

<p> </p>


<p>      这篇我们看看最长公共子序列的另一个版本，求字符串相似度(编辑距离)，我也说过了，这是一个非常实用的算法，在DNA对比，网</p>


<p>页聚类等方面都有用武之地。</p>


<p>一：概念</p>


<p>     对于两个字符串A和B，通过基本的增删改将字符串A改成B，或者将B改成A，在改变的过程中我们使用的最少步骤称之为“编辑距离”。</p>


<p>比如如下的字符串：我们通过种种操作，痉挛之后编辑距离为3，不知道你看出来了没有？</p>


<p><img src="http://pic002.cnblogs.com/images/2012/214741/2012111122013292.png" alt=""></p>


<p>二：解析</p>


<p>  可能大家觉得有点复杂，不好理解，我们试着把这个大问题拆分掉，将&quot;字符串 vs 字符串“，分解成”字符 vs 字符串“，再分解</p>


<p>成”字符 vs 字符“。</p>


<p>&lt;1&gt; ”字符“vs”字符“</p>


<p>       这种情况是最简单的了，比如”A“与”B“的编辑距离很显然是1。</p>


<p>&lt;2&gt; ”字符”vs&quot;字符串&quot;</p>


<p>       ”A“改成”AB“的编辑距离为1，“A”与“ABA”的编辑距离为2。</p>


<p>&lt;3&gt;“字符串”vs“字符串”</p>


<p>      “ABA”和“BBA”的编辑距离为1，仔细发现我们可以得出如下结论，”ABA“是由2<sup>3</sup>个子序列与”BBA“字符串求的的编辑距离集</p>


<p>合中取出的最小编辑距离，也就是说在这种情况下我们出现了重复计算的问题，我在求子序列”AB“和”BBA&quot;的编辑距离时，我是由</p>


<p>子序列”A“和”BBA“与”B“和”BBA“之间的编辑距离中选出一个最小值，然而序列A和序列B早之前我已经计算过了，这种重复计算</p>


<p>的问题有点像”斐波那契”，正好满足“动态规划”中的最优子结构和重叠子问题，所以我们决定采用动态规划来解决。</p>


<p> </p>


<p>三：公式</p>


<p>    跟“最长公共子序列”一样，我们采用一个二维数组来保存字符串X和Y当前的位置的最小编辑距离。</p>


<p>现有两个序列X={x<sub>1</sub>,x<sub>2</sub>,x<sub>3，</sub>...x<sub>i</sub>}，Y={y<sub>1</sub>,y<sub>2</sub>,y<sub>3，</sub>....，y<sub>i</sub>}，</p>


<p>设一个C[i,j]: 保存X<sub>i</sub>与Y<sub>j</sub>的当前最小的LD。</p>


<p>①： 当 X<sub>i </sub>= Y<sub>i</sub> 时，则C[i,j]=C[i-1,j-1]；</p>


<p>②：当 X<sub>i </sub>!= Y<sub>i </sub>时， 则C[i,j]=Min{C[i-1,j-1],C[i-1,j],C[i,j-1]}；</p>


<p>最终我们的C[i,j]一直保存着最小的LD。</p>


<p> </p>


<p>四：代码</p>


<div style="background-color:#f5f5f5;border:1px solid #cccccc;padding:10px"><span style="color:#008080"> 1</span> <span style="color:#0000ff">using</span><span style="color:#000000"> System;<br></span><span style="color:#008080"> 2</span> <br><span style="color:#008080"> 3</span> <span style="color:#0000ff">namespace</span><span style="color:#000000"> ConsoleApplication2<br></span><span style="color:#008080"> 4</span> <span style="color:#000000">{<br></span><span style="color:#008080"> 5</span>     <span style="color:#0000ff">public</span> <span style="color:#0000ff">class</span><span style="color:#000000"> Program<br></span><span style="color:#008080"> 6</span> <span style="color:#000000">    {<br></span><span style="color:#008080"> 7</span>         <span style="color:#0000ff">static</span> <span style="color:#0000ff">int</span><span style="color:#000000">[,] martix;<br></span><span style="color:#008080"> 8</span> <br><span style="color:#008080"> 9</span>         <span style="color:#0000ff">static</span> <span style="color:#0000ff">string</span> str1 = <span style="color:#0000ff">string</span><span style="color:#000000">.Empty;<br></span><span style="color:#008080">10</span> <br><span style="color:#008080">11</span>         <span style="color:#0000ff">static</span> <span style="color:#0000ff">string</span> str2 = <span style="color:#0000ff">string</span><span style="color:#000000">.Empty;<br></span><span style="color:#008080">12</span> <br><span style="color:#008080">13</span>         <span style="color:#0000ff">static</span> <span style="color:#0000ff">void</span> Main(<span style="color:#0000ff">string</span><span style="color:#000000">[] args)<br></span><span style="color:#008080">14</span> <span style="color:#000000">        {<br></span><span style="color:#008080">15</span>             <span style="color:#0000ff">while</span> (<span style="color:#0000ff">true</span><span style="color:#000000">)<br></span><span style="color:#008080">16</span> <span style="color:#000000">            {<br></span><span style="color:#008080">17</span>                 str1 =<span style="color:#000000"> Console.ReadLine();<br></span><span style="color:#008080">18</span> <br><span style="color:#008080">19</span>                 str2 =<span style="color:#000000"> Console.ReadLine();<br></span><span style="color:#008080">20</span> <br><span style="color:#008080">21</span>                 martix = <span style="color:#0000ff">new</span> <span style="color:#0000ff">int</span>[str1.Length + <span style="color:#800080">1</span>, str2.Length + <span style="color:#800080">1</span><span style="color:#000000">];<br></span><span style="color:#008080">22</span> <br><span style="color:#008080">23</span>                 Console.WriteLine(<span style="color:#800000">"</span><span style="color:#800000">字符串 {0} 和 {1} 的编辑距离为:{2}\n</span><span style="color:#800000">"</span><span style="color:#000000">, str1, str2, LD());<br></span><span style="color:#008080">24</span> <span style="color:#000000">            }<br></span><span style="color:#008080">25</span> <span style="color:#000000">        }<br></span><span style="color:#008080">26</span> <br><span style="color:#008080">27</span>         <span style="color:#808080">///</span> <span style="color:#808080">&lt;summary&gt;</span><br><span style="color:#008080">28</span>         <span style="color:#808080">///</span><span style="color:#008000"> 计算字符串的编辑距离<br></span><span style="color:#008080">29</span>         <span style="color:#808080">///</span> <span style="color:#808080">&lt;/summary&gt;</span><br><span style="color:#008080">30</span>         <span style="color:#808080">///</span> <span style="color:#808080">&lt;returns&gt;&lt;/returns&gt;</span><br><span style="color:#008080">31</span>         <span style="color:#0000ff">public</span> <span style="color:#0000ff">static</span> <span style="color:#0000ff">int</span><span style="color:#000000"> LD()<br></span><span style="color:#008080">32</span> <span style="color:#000000">        {<br></span><span style="color:#008080">33</span>             <span style="color:#008000">//</span><span style="color:#008000">初始化边界值(忽略计算时的边界情况)</span><br><span style="color:#008080">34</span>             <span style="color:#0000ff">for</span> (<span style="color:#0000ff">int</span> i = <span style="color:#800080">0</span>; i &lt;= str1.Length; i++<span style="color:#000000">)<br></span><span style="color:#008080">35</span> <span style="color:#000000">            {<br></span><span style="color:#008080">36</span>                 martix[i, <span style="color:#800080">0</span>] =<span style="color:#000000"> i;<br></span><span style="color:#008080">37</span> <span style="color:#000000">            }<br></span><span style="color:#008080">38</span> <br><span style="color:#008080">39</span>             <span style="color:#0000ff">for</span> (<span style="color:#0000ff">int</span> j = <span style="color:#800080">0</span>; j &lt;= str2.Length; j++<span style="color:#000000">)<br></span><span style="color:#008080">40</span> <span style="color:#000000">            {<br></span><span style="color:#008080">41</span>                 martix[<span style="color:#800080">0</span>, j] =<span style="color:#000000"> j;<br></span><span style="color:#008080">42</span> <span style="color:#000000">            }<br></span><span style="color:#008080">43</span> <br><span style="color:#008080">44</span>             <span style="color:#008000">//</span><span style="color:#008000">矩阵的 X 坐标</span><br><span style="color:#008080">45</span>             <span style="color:#0000ff">for</span> (<span style="color:#0000ff">int</span> i = <span style="color:#800080">1</span>; i &lt;= str1.Length; i++<span style="color:#000000">)<br></span><span style="color:#008080">46</span> <span style="color:#000000">            {<br></span><span style="color:#008080">47</span>                 <span style="color:#008000">//</span><span style="color:#008000">矩阵的 Y 坐标</span><br><span style="color:#008080">48</span>                 <span style="color:#0000ff">for</span> (<span style="color:#0000ff">int</span> j = <span style="color:#800080">1</span>; j &lt;= str2.Length; j++<span style="color:#000000">)<br></span><span style="color:#008080">49</span> <span style="color:#000000">                {<br></span><span style="color:#008080">50</span>                     <span style="color:#008000">//</span><span style="color:#008000">相等情况</span><br><span style="color:#008080">51</span>                     <span style="color:#0000ff">if</span> (str1[i - <span style="color:#800080">1</span>] == str2[j - <span style="color:#800080">1</span><span style="color:#000000">])<br></span><span style="color:#008080">52</span> <span style="color:#000000">                    {<br></span><span style="color:#008080">53</span>                         martix[i, j] = martix[i - <span style="color:#800080">1</span>, j - <span style="color:#800080">1</span><span style="color:#000000">];<br></span><span style="color:#008080">54</span> <span style="color:#000000">                    }<br></span><span style="color:#008080">55</span>                     <span style="color:#0000ff">else</span><br><span style="color:#008080">56</span> <span style="color:#000000">                    {<br></span><span style="color:#008080">57</span>                         <span style="color:#008000">//</span><span style="color:#008000">取“左前方”，“上方”，“左方“的最小值</span><br><span style="color:#008080">58</span>                         <span style="color:#0000ff">var</span> temp1 = Math.Min(martix[i - <span style="color:#800080">1</span>, j], martix[i, j - <span style="color:#800080">1</span><span style="color:#000000">]);<br></span><span style="color:#008080">59</span> <br><span style="color:#008080">60</span>                         <span style="color:#008000">//</span><span style="color:#008000">获取最小值</span><br><span style="color:#008080">61</span>                         <span style="color:#0000ff">var</span> min = Math.Min(temp1, martix[i - <span style="color:#800080">1</span>, j - <span style="color:#800080">1</span><span style="color:#000000">]);<br></span><span style="color:#008080">62</span> <br><span style="color:#008080">63</span>                         martix[i, j] = min + <span style="color:#800080">1</span><span style="color:#000000">;<br></span><span style="color:#008080">64</span> <span style="color:#000000">                    }<br></span><span style="color:#008080">65</span> <span style="color:#000000">                }<br></span><span style="color:#008080">66</span> <span style="color:#000000">            }<br></span><span style="color:#008080">67</span> <br><span style="color:#008080">68</span>             <span style="color:#008000">//</span><span style="color:#008000">返回字符串的编辑距离</span><br><span style="color:#008080">69</span>             <span style="color:#0000ff">return</span><span style="color:#000000"> martix[str1.Length, str2.Length];<br></span><span style="color:#008080">70</span> <span style="color:#000000">        }<br></span><span style="color:#008080">71</span> <span style="color:#000000">    }<br></span><span style="color:#008080">72</span> }</div>


<p><img src="http://pic002.cnblogs.com/images/2012/214741/2012111123291224.png" alt=""></p>


<p><img src="http://pic002.cnblogs.com/images/2012/214741/2012111123401124.png" alt=""></p>


<p><img src="http://www.cnblogs.com/huangxincheng/aggbug/2765633.html?type=1" width="1" height="1" alt=""><p><a href="http://www.cnblogs.com/huangxincheng/archive/2012/11/11/2765633.html">本文链接</a></p></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/lyuehh/">github.com/lyuehh</a><br />
                  <a href="http://twitter.com/lyuehh/">twitter.com/lyuehh</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
