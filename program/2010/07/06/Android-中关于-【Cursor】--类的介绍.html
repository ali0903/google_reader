<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Android 中关于 【Cursor】  类的介绍</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/google_reader/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/google_reader/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/google_reader/">Google Reader</a></h1>
              <a class="extra" href="/google_reader/">home</a>
            </div>

                <h2>Android 中关于 【Cursor】  类的介绍</h2>
<p class="meta">2010-07-06 00:02</p>

<div class="post">
<h2>Android 中关于 【Cursor】  类的介绍</h2>

<h3>by Terry_龙</h3>

<h3>at 2010-07-05 16:02:00</h3>

<h3>original <a href="http://www.cnblogs.com/TerryBlog/archive/2010/07/05/1771459.html">http://www.cnblogs.com/TerryBlog/archive/2010/07/05/1771459.html</a></h3>

<p><a href="http://www.cnblogs.com/TerryBlog/"><img src="http://pic.cnblogs.com/face/u107203.png" alt="" border="0"></a><br>作者: <a href="http://www.cnblogs.com/TerryBlog/">Terry_龙</a> 发表于 2010-07-05 16:02 <a href="http://www.cnblogs.com/TerryBlog/archive/2010/07/05/1771459.html">原文链接</a> 阅读: 649 评论: 4</p>


<p>使用过 SQLite 数据库的童鞋对 Cursor 应该不陌生，如果你是搞.net 开发你大可以把Cursor理解成 Ado.net 中的数据集合。今天特地将它单独拿出来谈，加深自己和大家对Android 中使用 Cursor 的理解。</p>


<p><strong>关于 Cursor</strong></p>


<p>在你理解和使用 Android Cursor 的时候你必须先知道关于 Cursor 的几件事情：</p>


<ul><li>Cursor 是每行的集合。</li><li>使用 moveToFirst() 定位第一行。</li><li>你必须知道每一列的名称。</li><li>你必须知道每一列的数据类型。</li><li>Cursor 是一个随机的数据源。</li><li>所有的数据都是通过下标取得。</li></ul>


<p><strong>关于 Cursor 的重要方法</strong>：</p>


<ul><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#close()">close</a></span>() <br>关闭游标，释放资源</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#copyStringToBuffer(int,%20android.database.CharArrayBuffer)">copyStringToBuffer</a></span>(int columnIndex, <a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/CharArrayBuffer.html">CharArrayBuffer</a> buffer) <br>在缓冲区中检索请求的列的文本，将将其存储</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#getColumnCount()">getColumnCount</a></span>() <br>返回所有列的总数</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#getColumnIndex(java.lang.String)">getColumnIndex</a></span>(<a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/java/lang/String.html">String</a> columnName) <br>返回指定列的名称，如果不存在返回-1</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#getColumnIndexOrThrow(java.lang.String)">getColumnIndexOrThrow</a></span>(<a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/java/lang/String.html">String</a> columnName) <br>从零开始返回指定列名称，如果不存在将抛出<a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/java/lang/IllegalArgumentException.html"><font face="Courier New">IllegalArgumentException</font></a> 异常。</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#getColumnName(int)">getColumnName</a></span>(int columnIndex) <br>从给定的索引返回列名</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#getColumnNames()">getColumnNames</a></span>() <br>返回一个字符串数组的列名</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#getCount()">getCount</a></span>() <br>返回Cursor 中的行数</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#moveToFirst()">moveToFirst</a></span>() <br>移动光标到第一行</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#moveToLast()">moveToLast</a></span>() <br>移动光标到最后一行</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#moveToNext()">moveToNext</a></span>() <br>移动光标到下一行</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#moveToPosition(int)">moveToPosition</a></span>(int position) <br>移动光标到一个绝对的位置</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#moveToPrevious()">moveToPrevious</a></span>() <br>移动光标到上一行</li></ul>


<p>下面来看看一小段代码：</p>


<p> </p>


<div>
<div><span style="color:#0000ff">if</span><span style="color:#000000"> (cur.moveToFirst() </span><span style="color:#000000">==</span><span style="color:#000000"> </span><span style="color:#0000ff">false</span><span style="color:#000000">)<br>{<br></span><span style="color:#008000">//</span><span style="color:#008000">为空的Cursor</span></div>
<div><span style="color:#008000"></span><span style="color:#0000ff">return</span><span style="color:#000000">;<br>}</span></div></div>


<p> </p>


<p>访问 Cursor 的下标获得其中的数据</p>


<p> </p>


<div>
<div><span style="color:#0000ff">int</span><span style="color:#000000"> nameColumnIndex </span><span style="color:#000000">=</span><span style="color:#000000"> cur.getColumnIndex(People.NAME);<br>String name </span><span style="color:#000000">=</span><span style="color:#000000"> cur.getString(nameColumnIndex);</span></div></div>


<p> </p>


<p> </p>


<p>现在让我们看看如何循环 Cursor 取出我们需要的数据</p>


<p> </p>


<div>
<div><span style="color:#0000ff">while</span><span style="color:#000000">(cur.moveToNext())<br>{<br></span><span style="color:#008000">//</span><span style="color:#008000">光标移动成功<br></span><span style="color:#008000">//</span><span style="color:#008000">把数据取出</span><span style="color:#008000"><br></span><span style="color:#000000">}</span></div></div>


<p> </p>


<p> </p>


<p>当cur.moveToNext() 为假时将跳出循环，即 Cursor 数据循环完毕。</p>


<p>如果你喜欢用 for 循环而不想用While 循环可以使用Google 提供的几下方法：</p>


<ul><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#isBeforeFirst()">isBeforeFirst</a></span>() <br>返回游标是否指向之前第一行的位置</li><li><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#isLast()"><span></span></a><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#isAfterLast()">isAfterLast</a><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#isLast()"></a></span>() <br>返回游标是否指向第最后一行的位置</li><li><span><span><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/Cursor.html#isClosed()">isClosed</a></span>() <br>如果返回 true 即表示该游戏标己关闭</span></li></ul>


<p><span>有了以上的方法，可以如此取出数据</span></p>


<p><span> </span></p>


<div>
<div><span style="color:#0000ff">for</span><span style="color:#000000">(cur.moveToFirst();</span><span style="color:#000000">!</span><span style="color:#000000">cur.isAfterLast();cur.moveToNext())<br>{<br>    </span><span style="color:#0000ff">int</span><span style="color:#000000"> nameColumn </span><span style="color:#000000">=</span><span style="color:#000000"> cur.getColumnIndex(People.NAME);<br>    </span><span style="color:#0000ff">int</span><span style="color:#000000"> phoneColumn </span><span style="color:#000000">=</span><span style="color:#000000"> cur.getColumnIndex(People.NUMBER);<br>    String name </span><span style="color:#000000">=</span><span style="color:#000000"> cur.getString(nameColumn);<br>    String phoneNumber </span><span style="color:#000000">=</span><span style="color:#000000"> cur.getString(phoneColumn);<br>}</span></div></div>


<p> </p>


<p>Tip:在Android 查询数据是通过Cursor 类来实现的。当我们使用 SQLiteDatabase.query()方法时，就会得到Cursor对象， Cursor所指向的就是每一条数据。结合ADO.net 的知识可能好理解一点。</p>


<p>Cursor 位于 android.database.Cursor类，可见出它的设计是基于数据库服务产生的。</p>


<p>另外，还有几个己知的子类，分别为：</p>


<ul><li><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/AbstractCursor.html">AbstractCursor</a></li><li><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/AbstractWindowedCursor.html">AbstractWindowedCursor</a></li><li> <a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/CrossProcessCursor.html">CrossProcessCursor</a></li><li> <a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/CursorWrapper.html">CursorWrapper</a></li><li> <a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/MatrixCursor.html">MatrixCursor</a></li><li> <a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/MergeCursor.html">MergeCursor</a></li><li> <a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/test/mock/MockCursor.html">MockCursor</a></li><li><a href="http://www.cnblogs.com/TerryBlog/admin/file:///D:/Program%20Files/android-sdk-windows/docs/reference/android/database/sqlite/SQLiteCursor.html">SQLiteCursor</a> </li></ul>


<p>具体详细的使用方法和解释可以去参照API，这里就不过多讲述。</p>


<p> <img src="http://www.cnblogs.com/TerryBlog/aggbug/1771459.html?type=1" width="1" height="1" alt=""><p>评论: 4　<a href="http://www.cnblogs.com/TerryBlog/archive/2010/07/05/1771459.html#pagedcomment">查看评论</a>　<a href="http://www.cnblogs.com/TerryBlog/archive/2010/07/05/1771459.html#commentform">发表评论</a></p><p><a href="http://mpd.cnblogs.com/">软件研发团队管理年会(上海，7.10-7.11)</a></p><hr><p>最新新闻：<br>· <a href="http://news.cnblogs.com/n/67624/">Android免费应用比例达57% 远超苹果iPhone</a><span style="color:gray">(2010-07-05 23:23)</span><br>· <a href="http://news.cnblogs.com/n/67623/">怎样改变世界：40年前在车库里鼓捣电脑，现在在车库里鼓捣基因</a><span style="color:gray">(2010-07-05 21:38)</span><br>· <a href="http://news.cnblogs.com/n/67622/">运营商的毒苹果</a><span style="color:gray">(2010-07-05 21:34)</span><br>· <a href="http://news.cnblogs.com/n/67621/">Linux基金会执行总裁：不把微软当对手</a><span style="color:gray">(2010-07-05 21:23)</span><br>· <a href="http://news.cnblogs.com/n/67620/">详解Google如何完成一次搜索</a><span style="color:gray">(2010-07-05 21:19)</span><br></p><p>编辑推荐：<a href="http://www.cnblogs.com/topic/53/">C#大论战：在讨论中学习</a><br></p><p>网站导航：<a href="http://www.cnblogs.com">博客园首页</a>  <a href="http://home.cnblogs.com/">个人主页</a>  <a href="http://news.cnblogs.com">新闻</a>  <a href="http://home.cnblogs.com/ing/">闪存</a>  <a href="http://home.cnblogs.com/group/">小组</a>  <a href="http://space.cnblogs.com/q/">博问</a>  <a href="http://space.cnblogs.com">社区</a>  <a href="http://kb.cnblogs.com">知识库</a></p></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/lyuehh/">github.com/lyuehh</a><br />
                  <a href="http://twitter.com/lyuehh/">twitter.com/lyuehh</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
