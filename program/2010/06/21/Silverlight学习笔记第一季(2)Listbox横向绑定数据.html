<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Silverlight学习笔记第一季(2)Listbox横向绑定数据</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/google_reader/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/google_reader/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/google_reader/">Google Reader</a></h1>
              <a class="extra" href="/google_reader/">home</a>
            </div>

                <h2>Silverlight学习笔记第一季(2)Listbox横向绑定数据</h2>
<p class="meta">2010-06-21 03:17</p>

<div class="post">
<h2>Silverlight学习笔记第一季(2)Listbox横向绑定数据</h2>

<h3>by 撞破南墙</h3>

<h3>at 2010-06-20 19:17:00</h3>

<h3>original <a href="http://www.cnblogs.com/facingwaller/archive/2010/06/20/1758268.html">http://www.cnblogs.com/facingwaller/archive/2010/06/20/1758268.html</a></h3>

<p><a href="http://www.cnblogs.com/facingwaller/"><img src="http://pic.cnblogs.com/face/u69696.jpg" alt="" border="0"></a><br>作者: <a href="http://www.cnblogs.com/facingwaller/">撞破南墙</a> 发表于 2010-06-20 19:17 <a href="http://www.cnblogs.com/facingwaller/archive/2010/06/20/1758268.html">原文链接</a> 阅读: 791 评论: 0</p>


<p>最终的效果图</p>


<p><img src="http://pic002.cnblogs.com/img/facingwaller/201006/2010062018552835.jpg"></p>


<p><span style="font-size:14pt"><strong>寻找最终的过程</strong></span></p>


<p><span style="font-size:14pt"><br></span></p>


<p>通常我们可以这样使用listbox</p>


<div style="background-color:#f5f5f5;font-size:13px;width:700px;word-break:break-all;font-family:&#39;Courier New&#39;;overflow-x:auto;overflow-y:auto;padding:5px;border:1px solid #cccccc">
<pre><div><span style="font-family:&#39;Courier New&#39;;color:#000000">        </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;</span><span style="font-family:&#39;Courier New&#39;;color:#800000">ListBox </span><span style="font-family:&#39;Courier New&#39;;color:#ff0000">x:Name</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">="LB1"</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>            </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;</span><span style="font-family:&#39;Courier New&#39;;color:#800000">ListBox.ItemTemplate</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>                </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;</span><span style="font-family:&#39;Courier New&#39;;color:#800000">DataTemplate</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>                    </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;</span><span style="font-family:&#39;Courier New&#39;;color:#800000">StackPanel </span><span style="font-family:&#39;Courier New&#39;;color:#ff0000">Width</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">="50"</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>                        </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;</span><span style="font-family:&#39;Courier New&#39;;color:#800000">TextBlock </span><span style="font-family:&#39;Courier New&#39;;color:#ff0000">Text</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">="</span><span style="font-family:&#39;Courier New&#39;;color:#808000">{Binding Name}</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">"</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;&lt;/</span><span style="font-family:&#39;Courier New&#39;;color:#800000">TextBlock</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>                    </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;/</span><span style="font-family:&#39;Courier New&#39;;color:#800000">StackPanel</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>                </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;/</span><span style="font-family:&#39;Courier New&#39;;color:#800000">DataTemplate</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>            </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;/</span><span style="font-family:&#39;Courier New&#39;;color:#800000">ListBox.ItemTemplate</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;;color:#000000"><br>        </span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&lt;/</span><span style="font-family:&#39;Courier New&#39;;color:#800000">ListBox</span><span style="font-family:&#39;Courier New&#39;;color:#0000ff">&gt;</span></div></pre>
</div>


<p><strong>我想的办法：</strong></p>


<p>1 指定模板的排列方式   Orientation=&quot;Horizontal&quot;</p>


<p>但是不能直接在页面上指定，为什么呢？因为无法直接给 DataTemplate 指定 样式。</p>


<p><strong>失败!</strong></p>


<p>2 动态添加到stackpanel</p>


<div>
<pre><div><span style="color:#000000">    TextBlock textBlock </span><span style="color:#000000">=</span><span style="color:#000000"> </span><span style="color:#0000ff">new</span><span style="color:#000000"> TextBlock();<br>            textBlock.Text </span><span style="color:#000000">=</span><span style="color:#000000"> </span><span style="color:#800000">"</span><span style="color:#800000">测试数据</span><span style="color:#800000">"</span><span style="color:#000000">;<br>            StackPanel stackPanel </span><span style="color:#000000">=</span><span style="color:#000000"> </span><span style="color:#0000ff">new</span><span style="color:#000000"> StackPanel();<br>            stackPanel.Children.Add(textBlock);<br>            grid1.Children.Add(textBlock);<br>            grid1.Children.Add(stackPanel);</span></div></pre>
</div>


<p>因为这种方法前后台并不分离，在做web开发这种方式是本人极力避免的。。。虽然可以，但是必须想其他办法。</p>


<p><strong>不好用</strong></p>


<p>3 很无赖的办法。旋转listbox</p>


<p><img src="http://pic002.cnblogs.com/img/facingwaller/201006/2010062018191846.jpg"></p>


<p>这个其实很郁闷的，我是通过把第二项右移一个项宽度，上移一个项高度实现的 “伪横向”。</p>


<p>但是第N项得移动N*常数 的长度。太丑了。。。</p>


<p>纯属恶搞的做法，还是不行。</p>


<p> </p>


<p>4  重写一个控件来显示。</p>


<p>找到了以下资料</p>


<h2 style="margin-top:10px;font-size:1.1em">Silverlight控件开发</h2>


<div><a href="http://www.cnblogs.com/yingql/category/236862.html">http://www.cnblogs.com/yingql/category/236862.html</a></div>


<div>还有一篇是一篇MSDN的杂志里面的一篇开发的。但是后来链接弄丢了。。。</div>


<div>如果你知道的话，麻烦告知。</div>


<div>就是在那篇文章里面，讲了开发一个 控件可以给定默认的 样式。</div>


<div>我发现这样是可行的。</div>


<div>于是在MSDN里面的 找到</div>


<p>     <a style="color:#960bb4;text-decoration:none" href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.control(v=VS.95).aspx">System.Windows.Controls.Control</a><br>          <a style="color:#960bb4;text-decoration:none" href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.itemscontrol(v=VS.95).aspx">System.Windows.Controls.ItemsControl</a><br>            <a style="color:#1364c4;text-decoration:none" href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.primitives.selector(v=VS.95).aspx">System.Windows.Controls.Primitives.Selector</a><br>              <span>System.Windows.Controls.ListBox</span></p>


<p>然后跑去 <a href="http://msdn.microsoft.com/zh-cn/library/system.windows.controls.itemscontrol(v=VS.95).aspx">ItemsControl </a>里，准备继承他然后实现。</p>


<p>就在这个时候，悲剧发生了。。。。</p>


<p>答案已经在MS的示例里面了。</p>


<p><a href="http://samples.msdn.microsoft.com/Silverlight/SampleBrowser/index.htm#/?sref=System.Windows.Controls.ListBoxEx">http://samples.msdn.microsoft.com/Silverlight/SampleBrowser/index.htm#/?sref=System.Windows.Controls.ListBoxEx</a></p>


<p>XAML代码</p>


<p><strong><span style="color:#ff0000"><span style="font-size:12pt">正点解方法一</span></span></strong></p>


<div>
<pre><div><span style="color:#0000ff">&lt;</span><span style="color:#800000">Style </span><span style="color:#ff0000">x:Key</span><span style="color:#0000ff">="horizontalListBoxStyle"</span><span style="color:#ff0000"> TargetType</span><span style="color:#0000ff">="ListBox"</span><span style="color:#0000ff">&gt;</span></div><div> <span style="color:#000000"><span style="color:#0000ff"> 　　　　　　　　　　　　　　　　&lt;!--容器模板--&gt;<br></span>                        </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">Setter </span><span style="color:#ff0000">Property</span><span style="color:#0000ff">="ItemsPanel"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">Setter.Value</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                                </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">ItemsPanelTemplate</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                                    </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">StackPanel </span><span style="color:#ff0000">Orientation</span><span style="color:#0000ff">=&quot;Horizontal&quot;&lt;!--横向--&gt;</span><span style="color:#ff0000"><br>                            VerticalAlignment</span><span style="color:#0000ff">="Center"</span><span style="color:#ff0000"><br>                            HorizontalAlignment</span><span style="color:#0000ff">="Center"</span><span style="color:#0000ff">/&gt;</span><span style="color:#000000"><br>                                </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">ItemsPanelTemplate</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                            </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">Setter.Value</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                        </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">Setter</span><span style="color:#0000ff">&gt;</span></div><div> <span style="color:#000000"><span style="color:#0000ff">　　　　　　　　　　　　　　　　　　&lt;!--   item模板    --&gt;<br></span>                        </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">Setter </span><span style="color:#ff0000">Property</span><span style="color:#0000ff">="ItemTemplate"</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                            </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">Setter.Value</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                                </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">DataTemplate</span><span style="color:#0000ff">&gt;</span></div><div> <span style="color:#000000"><span style="color:#0000ff">　　　　　　　　　　　　　　　　　　　　&lt;!-- <strong>这里设置自己定义的控件和显示</strong>--&gt;<br></span>                                    </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">StackPanel </span><span style="color:#ff0000">Orientation</span><span style="color:#0000ff">="Horizontal"</span><span style="color:#0000ff">&gt;</span><span style="font-family:&#39;Courier New&#39;">                                     </span></div><div><span style="color:#000000">　　　　　　　　　　　　　　 </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">TextBlock </span><span style="color:#ff0000">Padding</span><span style="color:#0000ff">="5,0,5,0"</span><span style="color:#ff0000"><br>                          Text</span><span style="color:#0000ff">="</span><span style="color:#808000">{Binding FirstName}</span><span style="color:#0000ff">"</span><span style="color:#ff0000"> </span><span style="color:#0000ff">/&gt;</span><span style="color:#000000"><br>                                        </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">TextBlock </span><span style="color:#ff0000">Text</span><span style="color:#0000ff">="</span><span style="color:#808000">{Binding LastName}</span><span style="color:#0000ff">"</span><span style="color:#ff0000"> </span><span style="color:#0000ff">/&gt;</span><span style="color:#000000"><br>                                    </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">StackPanel</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                                </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">DataTemplate</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                            </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">Setter.Value</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                        </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">Setter</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>                    </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">Style</span><span style="color:#0000ff">&gt;</span></div></pre>
</div>


<p>效果图：</p>


<p><img src="http://pic002.cnblogs.com/img/facingwaller/201006/2010062018482363.jpg"></p>


<p>原来可以覆盖他默认的样式。</p>


<p><span style="color:#ff0000"><strong><span style="font-size:12pt">正点解方法二</span></strong></span></p>


<p>还有另外一种方式，控件中指定</p>


<div>
<pre><div><span style="color:#0000ff">&lt;</span><span style="color:#800000">ItemsControl.ItemsPanel</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>      </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">ItemsPanelTemplate</span><span style="color:#0000ff">&gt;</span><span style="color:#000000"><br>        </span><span style="color:#0000ff">&lt;</span><span style="color:#800000">StackPanel </span><span style="color:#ff0000">Orientation</span><span style="color:#0000ff">="Horizontal"</span><span style="color:#0000ff">/&gt;</span><span style="color:#000000"><br>      </span><span style="color:#0000ff">&lt;/</span><span style="color:#800000">ItemsPanelTemplate</span><span style="color:#0000ff">&gt;</span></div></pre>
</div>


<p>我相信应该有很多人知道横向绑定数据这个问题，也许是因为太简单了。。。</p>


<p>但是我查了网上也没有，问了群里的人但是似乎没描述好。</p>


<p>反正是也没得到答案，于是把整个寻找答案的过程记录了下来，也分享给我这种初学者。</p>


<p>对于这种问题，首先我们得知道他是一个样式绑定的问题，其次我们得想办法改变它的样式(方法一和最终)</p>


<p>不行的话想想其他方法的实现，（方法2）。还是不行的话可以试试 邪门的办法(hack)(方法3)。</p>


<p>因为我的对控件的知识没掌握好，不知道ListBox 是由 itempanel 做容器。</p>


<p>要更改itempanel中的控件排列形式，肯定不能在ItemTemplate 那里指定。</p>


<p>因为<strong><span style="color:#ff0000">他只是用来指定重复的内容<span style="color:#000000">，<span style="font-weight:normal">一定要去他的ItemsPanel 指定他的容器。</span></span></span></strong></p>


<p>希望对Silverlight的初学者有所帮助。</p>


<p><strong>另外希望路过的牛人介绍一下如何系统的学习。</strong></p>


<p><strong>解决一下我这样学，不知道相对底一点的东西，遇到书上没有现成解决方案就困窘的这种状况。</strong></p>


<p><img src="http://www.cnblogs.com/facingwaller/aggbug/1758268.html?type=1" width="1" height="1" alt=""><p>评论: 0　<a href="http://www.cnblogs.com/facingwaller/archive/2010/06/20/1758268.html#pagedcomment">查看评论</a>　<a href="http://www.cnblogs.com/facingwaller/archive/2010/06/20/1758268.html#commentform">发表评论</a></p><p><a href="http://a4.yeshj.com/rd/35721/">众里寻你千百度，百度期待您的加盟</a></p><hr><p>最新新闻：<br>· <a href="http://news.cnblogs.com/n/66656/">暴雪因战网过于限制用户权利或被韩国当局制裁</a><span style="color:gray">(2010-06-21 11:48)</span><br>· <a href="http://news.cnblogs.com/n/66653/">不等Intel和台系！国内品牌率先支持USB3.0！</a><span style="color:gray">(2010-06-21 11:43)</span><br>· <a href="http://news.cnblogs.com/n/66652/">奇艺调整Hulu模式：成立事业部尝试拍网络剧</a><span style="color:gray">(2010-06-21 11:37)</span><br>· <a href="http://news.cnblogs.com/n/66651/">古永锵：一切都在预料中 除盛大介入视频业</a><span style="color:gray">(2010-06-21 11:23)</span><br>· <a href="http://news.cnblogs.com/n/66650/">Palm：新款智能手机及新版webOS明年面世</a><span style="color:gray">(2010-06-21 11:20)</span><br></p><p>编辑推荐：<a href="http://www.cnblogs.com/firelong/archive/2010/06/20/1761357.html">C与C++社区混战，C#会重蹈覆辙吗？</a><br></p><p>网站导航：<a href="http://www.cnblogs.com">博客园首页</a>  <a href="http://home.cnblogs.com/">个人主页</a>  <a href="http://news.cnblogs.com">新闻</a>  <a href="http://home.cnblogs.com/ing/">闪存</a>  <a href="http://home.cnblogs.com/group/">小组</a>  <a href="http://space.cnblogs.com/q/">博问</a>  <a href="http://space.cnblogs.com">社区</a>  <a href="http://kb.cnblogs.com">知识库</a></p></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/lyuehh/">github.com/lyuehh</a><br />
                  <a href="http://twitter.com/lyuehh/">twitter.com/lyuehh</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
