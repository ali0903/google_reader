<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Android下用OpenGL画的一个旋转的圆形</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/css/main.css">

    </head>
    <body>

        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/">Your New Jekyll Site</a></h1>
              <a class="extra" href="/">home</a>
            </div>

                <h2>Android下用OpenGL画的一个旋转的圆形</h2>
<p class="meta">16 Dec 2010</p>

<div class="post">
<h2>Android下用OpenGL画的一个旋转的圆形</h2>

<h3>by</h3>

<h3>at 2010-12-15 17:02:32</h3>

<h3>original <a href="http://www.javaeye.com/topic/843106">http://www.javaeye.com/topic/843106</a></h3>

<p>这是我在android下用OGL ES画的第一个图形，Render的override部分引用了其它同学的一些代码
<br>怎么上截图？
<br>
<br><pre name="code">public class GLRender implements Renderer{</p>

<pre><code>float rotateAngle;

//顶点数组,GL ES只能用这个办法画圆吗？
private float[] vertices = new float[720];

//度到弧度的转换
public float DegToRad(float deg)
{
    return (float) (3.14159265358979323846 * deg / 180.0);
}


@Override
public void onDrawFrame(GL10 gl) {
    // TODO Auto-generated method stub

    // 进入这个函数第一件要做的事就是清除屏幕和深度缓存
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);

    //画圆形
    drawCircle(gl);
}

public void drawCircle(GL10 gl)
{
    //重置投影矩阵
    gl.glLoadIdentity();
    // 移动操作，移入屏幕(Z轴)5个像素, x, y , z
    gl.glTranslatef(0.0f, 0.0f, -5.0f);

    //旋转, angle, x, y , z
    gl.glRotatef(rotateAngle, 1.0f, 0.0f, 0.0f);

    // 设置当前色为红色, R, G, B, Alpha
    gl.glColor4f(1.0f, 0.1f, 0.1f, 1.0f);

    //设置圆形顶点数据，这个是在创建时生成
    FloatBuffer verBuffer = FloatBuffer.wrap(vertices);

    //设置顶点类型为浮点坐标(GL_FLOAT)，不设置或者设置错误类型将导致图形不能显示或者显示错误
    gl.glVertexPointer(2, GL10.GL_FLOAT, 0, verBuffer);

    //打开顶点数组
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);

    //向OGL发送实际画图指令
    gl.glDrawArrays(GL10.GL_TRIANGLE_FAN, 0, 360);

    //关闭顶点数组功能
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);

    //画图结束
    gl.glFinish();

    //更改旋转角度
    rotateAngle += 0.5;
}


@Override
public void onSurfaceChanged(GL10 gl, int width, int height) {
    // TODO Auto-generated method stub

    float ratio = (float) width / height;
    //设置OpenGL场景的大小
    gl.glViewport(0, 0, width, height);
    //设置投影矩阵
    gl.glMatrixMode(GL10.GL_PROJECTION);
    //重置投影矩阵
    gl.glLoadIdentity();
    // 设置视口的大小
    gl.glFrustumf(-ratio, ratio, -1, 1, 1, 10);
    // 选择模型观察矩阵
    gl.glMatrixMode(GL10.GL_MODELVIEW);    
    // 重置模型观察矩阵
    gl.glLoadIdentity();    

}

@Override
public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // TODO Auto-generated method stub
    // 启用阴影平滑
    gl.glShadeModel(GL10.GL_SMOOTH);
    // 黑色背景
    gl.glClearColor(0, 0, 0, 0);
    // 设置深度缓存
    gl.glClearDepthf(1.0f);                            
    // 启用深度测试
    gl.glEnable(GL10.GL_DEPTH_TEST);                        
    // 所作深度测试的类型
    gl.glDepthFunc(GL10.GL_LEQUAL);                            

    // 告诉系统对透视进行修正
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_FASTEST);


    //初始化圆形数据
    for (int i = 0; i &amp;lt; 720; i += 2) {
        // x value
        vertices[i]   = (float) (Math.cos(DegToRad(i)) * 1);
        // y value
        vertices[i+1] = (float) (Math.sin(DegToRad(i)) * 1);
    }
}
</code></pre>

<p>}</pre>
<br>
<br>完整程序见附件</p>

<p>  <br><br>
  <ul>
    本文附件下载:</p>

<pre><code>  &lt;li&gt;&lt;a href="http://dl.javaeye.com/topics/download/3f20ad00-0257-37ea-8e0a-9690ff535827"&gt;FirstOpenGlPrj.rar&lt;/a&gt; (41.8 KB)&lt;/li&gt;
</code></pre>

<p>  </ul></p>

<pre><code>      &lt;br&gt;&lt;br&gt;
      作者: &lt;a href="http://dyingearth.javaeye.com"&gt;dyingearth&lt;/a&gt; 
      &lt;br&gt;
      声明: 本文系JavaEye网站发布的原创文章，未经作者书面许可，严禁任何网站转载本文，否则必将追究法律责任！
      &lt;br&gt;&lt;br&gt;
      &lt;span style="color:red"&gt;
        &lt;a href="http://www.javaeye.com/topic/843106" style="color:red"&gt;已有 &lt;strong&gt;1&lt;/strong&gt; 人发表回复，猛击-&amp;gt;&amp;gt;&lt;strong&gt;这里&lt;/strong&gt;&amp;lt;&amp;lt;-参与讨论&lt;/a&gt;
      &lt;/span&gt;
      &lt;br&gt;&lt;br&gt;&lt;br&gt;
</code></pre>

<p><span style="color:#e28822">JavaEye推荐</span>
<br></p>

<ul><li><a href="http://www.iteye.com/clicks/433"><span style="color:red;font-weight:bold">—软件人才免语言低担保 赴美带薪读研！— </span></a></li></ul>


<p><br><br><br></p>

</div>


            <div class="footer">
              <div class="contact">
                <p>
                  Your Name<br />
                  What You Are<br />
                  your@email.com
                </p>
              </div>
              <div class="contact">
                <p>
                  <a href="http://github.com/yourusername/">github.com/yourusername</a><br />
                  <a href="http://twitter.com/yourusername/">twitter.com/yourusername</a><br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
</html>
